# Что нового в Carrot 1.1.5?

## Исправления

### 1.1.5.2

В настройки Mos Adapter Settings (Dalet) добавлен параметр `SyncOnStart` (выключен по умолчанию), который синхронизирует объекты Dalet и Carrot при запуске адаптера.
### 1.1.5.3

1. Оптимизирована процедура загрузки окна взаимодействия с ивентами Carrot при запуске из интерфейса Dalet - при создании нового CG-объекта в Dalet, на стороне окна больше не проскакивает страница редактирования нового ивента Carrot, а сразу отображается выбор шаблона для нового ивента Carrot.

2. При запуске из интерфейса Dalet окна взаимодействия с ивентами Carrot (режим создания нового объекта - CREATE), общий список существующих ивентов больше не загружается сразу. Это увеличивало время ожидания загрузки окна.

3. Исправлена ошибка в режиме “Enabled” превью плеера (доступен в Web Playlist -> Settings -> Show preview player), которая приводила к сбросу плеера при переключении между ивентами.

### 1.1.5.4

1. Исправлено падение Carrot Engine при наличии сохраненного LUT файла в настройках нод Luma, Keyer, AR.

2. Исправлена ошибка, приводящая к невозможности сохранить порядок осей вращения слоя АЕ-шаблона (Rotation Order) в Template Preview.

### 1.1.5.5

Исправлено падение Carrot Engine в некоторых случаях в момент выгрузки шаблона.

### 1.1.5.6

Исправлена ошибка, в некоторых случаях приводящая к несохранению порядка осей вращения слоя АЕ-шаблона в Template Preview.

### 1.1.5.7

Исправлена ошибка, при которой можно было сохранить ивент с запрещенными символами в имени даже при включенной настройке сервера Windows Restricted Chars.

### 1.1.5.8

1. При включенной настройке сервера Windows Restricted Chars больше нельзя переименовать шаблон именем, содержащим запрещенные символы

2. Исправлена ошибка, в некоторых случаях приводящая к падению Carrot System Monitor при остановке движков

3. Реализована двусторонняя синхронизация между Carrot и Dalet в части добавленных, переименованных и удаленных объектов - ивентов на стороне Carrot и CG-объектов на стороне Dalet

### 1.1.5.9

1. Исправлена ошибка, в некоторых случаях приводящая к потере синхронизации между сигналами Fill и Key в Carrot Engine.

2. В окне редактирования нового ивента Carrot при запуске из интерфейса Dalet (режим создания нового объекта - CREATE) кнопка Save as new теперь создаёт новый CG-объект внутри истории в Dalet вместе с новым ивентом в Carrot.

### 1.1.5.10

1. Исправлена ошибка, в некоторых случаях приводящая к потере содержимого вкладки Media на странице Browser веб-интерфейса, после окончания репликации.

2. Исправлена ошибка, в некоторых случаях приводящая к падению резервного Carrot Server при удалении папки с медиа ассетами.

3. Исправлена ошибка, в некоторых случаях приводящая к падению Сarrot Server при включенной настройке сервера Collect Statistics.

4. Исправлена процедура репликации на только что установленной системе ПО Carrot.

### 1.1.5.11

1. В окно редактирования нового эвента Carrot, вызванного из интерфейса Dalet (режим создания нового объекта - CREATE) добавлена кнопка возврата к окну создания еще одного эвента - Create another Event.

2. Xml-Rpc Adapter Console: Комбинация клавиш для запуска принудительной регистрации в системе Carrot набора событий (Actions) из Skylark изменена на CTRL+ALT+3.

### 1.1.5.12

Исправлена процедура проигрывания референсных шаблонов.

### 1.1.5.13

1. Исправлена ошибка, в некоторых случаях приводящая к неудалению ивентов Carrot при удалении соответствующих им CG-объектов в Dalet

2. Исправлена ошибка, в некоторых случаях приводящая к зависанию в статусе Loading ивента, созданного из UE шаблона с определенным набором переменных

3. Исправлена ошибка, в некоторых конфигурациях приводящая к некорректной работе модуля DataStream при использовании двух плагинов, подключенных к одному файлу

4. Исправлена ошибка, в некоторых случаях приводящая к некорректному выставлению времени стейтов

5. Исправлена процедура переключения на резервный Carrot Server

### 1.1.5.14

1. Исправлена ошибка, в некоторых случаях приводящая к падению веб-сервера

2. Исправлено некорректное сглаживание границ при использовании нод Container и Viewport в качестве текстур на 3D слоях AE шаблона

### 1.1.5.15

1. Исправлена ошибка, которая может возникать в момент открытия шаблона в Template Preview

### 1.1.5.16

1. Убран функционал Fast Edit в веб-интерфейсе

2. Исправлена ошибка, при которой в некоторых случаях при пересохранении шаблона и последующем его проигрывании происходило падение Carrot Engine с ошибкой OpenGL

3. Исправлена ошибка, в некоторых случаях приводящая к исчезанию более нижних слоев шаблона при использовании Track Matte на более верхних слоях шаблона

4. Исправлена ошибка, приводящая к некорректному отображению слоев шаблона при использовании Track Matte и наличию 3D слоев в шаблоне

5. Исправлена ошибка, приводящая к некорректному отображению слоев шаблона при каскадном использовании Track Matte

6. Скорректирована логика сброса буферов в Carrot Engine

7. Добавлена возможность работать с FBX на Null Layer слоях АЕ-шаблона в Template Preview

8. Исправлена анимация камеры из АЕ при экспорте шаблона в Template Preview

9. Исправлена ошибка, в некоторых случаях приводящая к падению Carrot Engine при изменении переменной через DataStream

10. Для совмещения 3D и 2D композиций в АЕ-шаблоне, при задании размера для 2D композиции больше не нужно учитывать параметр 3D Oversize.

>До этого размеры 2D композиции нужно было домножать на значение oversize для корректного совмещения 3D и 2D: для fullHD (1920x1080) и oversize = 1.25 размер 2D композиции должен был быть 2400х1350

### 1.1.5.17

1. Реализован функционал локальных переменных, доступных в рамках одного отдельно взятого Carrot Engine

2. В Template Preview в редактор StateLogic добавлена возможность использовать логические операции XOR и TRIGGER

3. Исправлена процедура перепривязки FBX к слою шаблона в Template Preview с последующим пересохранением шаблона

4. Исправлено отображение выключенных слоев при использовании сортировки DistanceSort в Template Preview

### 1.1.5.18

1. Исправлена логика процедуры Renew у АЕ-шаблона, использующего FBX, в Template Preview.

2. Исправлена логика импорта\экспорта в XML шаблона, использующего FBX, в Template Preview.

### 1.1.5.19

1. Исправления в логике процедуры Renew у шаблона в Template Preview

2. Исправлена ошибка, в некоторых случаях приводящая к зависанию Template Preview при пересохранении шаблона со включенной опцией Engine Link

3. Исправлена ошибка, в некоторых случаях приводящая к потере текстур FBX-слоя у сдублированного через Web Playlist шаблона

4. Скорректирована логика сброса буферов в Carrot Engine при использовании Fill/Key

### 1.1.5.20

Исправлена ошибка, в некоторых случаях приводящая к автоматической остановке Carrot Engine приложением Launcher при потере соединения между движком и сервером

### 1.1.5.21

1. Глобальные переменные, доступные в рамках одного отдельно взятого Carrot Engine, теперь могут использоваться несколькими шаблонами

2. В Keyer, AR и Luma добавлена возможность коррекции гаммы sRGB -> Linear RGB и обратно для Foreground и Background ([Описание](https://wiki.yandex.ru/homepage/carrot-1.0/scenarii-ispolzovanija/gamma-korrekcija/))

3. Исправлена ошибка, приводящая к появлению черного фона у экспортированного из АЕ шаблона, использующего виртуальную камеру

4. Логирование событий расширено информацией о подключении к Carrot Server

5. Добавлено логирование процедуры сброса буферов в Carrot Engine

6. В Script Editor в Template Preview добавлена возможность использовать метод `contentSize()` для получения размеров контента  
    Пример вызова метода в скрипте:`thisComp.layer(3).contentSize()`

7. Протестирована совместимость UE v5.2 RTXDI (NVidia) с Carrot UE plugin ([Описание](https://wiki.yandex.ru/homepage/carrot-1.0/scenarii-ispolzovanija/ispolzovanie-carrot-ue-plugin-s-ue-5.2-rtxdi/))

### 1.1.5.22

1. Исправлены некоторые формы символов при отображении арабского текста в Carrot Engine

2. Исправлено отображение в Carrot Engine наложенного HDRi cubemap на FBX слой АЕ-шаблона

3. Расширено логирование процедуры авторизации

4. В Template Preview добавлена возможность удаления добавленных вручную текстур и cubemap к АЕ-шаблону, использующему FBX

5. В Template Preview исправлено наименование добавленных вручную текстур и cubemap к АЕ-шаблону, использующему FBX

### 1.1.5.23

В Script Editor в Template Preview добавлена возможность использовать флаг IsFileSource у FootageSource.  

>Запись вида `footage('Img').MainSource.IsFileSource == True` позволит убедиться, что футаж - это медиа ассет, а не контент из схемы движка

### 1.1.5.24

Исправлено применение параметра IsRightToLeft у текстового слоя в TemplatePreview

### 1.1.5.25

В настройки Carrot Engine добавлен механизм сглаживания нестабильных значений трекинг-данных Adaptive Tracking Interpolation

### 1.1.5.26

Исправлена ошибка, в некоторых случаях приводящая к потере отрисовки некоторых поверхностей (back face culling) у 3D слоев шаблона после его экспорта из АЕ
