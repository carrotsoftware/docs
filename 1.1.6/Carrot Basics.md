# Основы Carrot

В данном разделе можно ознакомиться с **пользовательским интерфейсом**, **работой** и **функциональными возможностями** приложений **Carrot**.

## Carrot Server

### Назначение

**Carrot Server** предназначен для формирования базы данных, хранения мультимедийной информации, а также обеспечения информационного взаимодействия между приложениями **Carrot**.

>В случае, если **Carrot Server** не запущен, то работа приложений **Carrot** (основных, дополнительных и интеграционных) **невозможна**.


### Функциональные возможности

Основными функциональными возможностями **Carrot Server** является:
- формирование базы данных, в том числе обеспечение её хранения, импорта и экспорта;
- обеспечение информационного взаимодействие между приложениями **Carrot**;
- поддержка работы в режиме репликации (синхронизации) данных;
- отображение списка запущенных приложений **Carrot** в формируемой локальной сети.


### Описание пользовательского интерфейса

![CS Main Window](..\images\1.1.5\Carrot%20Server\CS%20Main%20Window.png)

Пользовательский интерфейс приложения **Carrot Server** состоит из следующих областей:
- **"Вспомогательные кнопки взаимодействия с Carrot Server"** (1);
- **"Основное рабочее пространство Carrot Server"** (2);
- **"Данные процесса репликации"** (3).

#### Область "Вспомогательные кнопки взаимодействия с Carrot Server"

![CS Buttons](..\images\1.1.5\Carrot%20Server\CS%20Buttons.png)


Область **"Вспомогательные кнопки взаимодействия с Carrot Server"** включает в себя следующие кнопки:
- `File` (1);
- `Tools` (2);
- `Help` (3).

##### Кнопка `File`

![CS File Button](..\images\1.1.5\Carrot%20Server\CS%20File%20Button.png)

При взаимодействии с кнопкой `File` отображаются два функциональных элемента, назначение которых представлено в таблице ниже.

| Наименование функционального элемента | Назначение                                                               |
| ------------------------------------- | ------------------------------------------------------------------------ |
| `Settings`                            | Открытие окна **"Settings"** для настройки параметров **Carrot Server**. |
| `Exit`                                | Завершение работы **Carrot Server**.                                     |

###### Функциональный элемент `Settings`

После взаимодействия с функциональным элементом `Settings` откроется окно **"Settings"**, предназначенное для настроек параметров **Carrot Server**.

![CS Settings](..\images\1.1.5\Carrot%20Server\CS%20Settings.png)

Настраиваемые параметры **Carrot Server** распределены по разделы, перечень и назначение которых изложены в таблицах ниже.

**Раздел** `Common`

| Наименование параметра | Назначение                                                                                                                                                                                                                                                    |
| ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Server Name`          | Присвоение персонального наименования рабочей станции, на которой запущен **Carrot Server**. Целью данного параметра является определение имени рабочей станции в случае, если произошла нештатная ситуация (прекращение работы, некорректная работа и т.п.). |

>Наименование рабочей станции используется в приложении **System Monitor**.

**Раздел** `Data Base`

| Наименование параметра | Назначение                                              |
| ---------------------- | ------------------------------------------------------- |
| `Directory`            | Указание Carrot Server директории (пути) к базе данных. |

>В **базе данных** содержится основные файлы (AE шаблоны, .xml и .xlsx файлы и пр.), необходимые для работы **Carrot** в целом.

| | |
|-------------------|----------|
|`Backup Directory`|Указание Carrot Server директории (пути) к резервной копии базы данных. Применимо в случаях обновления базы данных.|
|`Unique Event names`|Включение (True)/отключение (False) режима проверки на уникальность имени ивента в базе данных.|
|`Windows Restricted Chars`|Включение (True)/отключение (False) режима проверки имён ивентов и шаблонов на запрещённые символы Windows.|
|`Skylark Integration`|Включение (True)/отключение (False) режима проверки уникальности имени ивента в базе данных playout-системы **Skylark** и **Carrot**.|

>Включённый функционал параметров `Unique Event names`, `Windows Restricted Chars` и `Skylark Integration` необходим для взаимодействия с playout-системой **Skylark**.

| | |
|-------------------|----------|
|`Check Authorization And Roles`|Включение (True)/отключение (False) режима проверки авторизированной учётной записи на доступные ей функциональные возможности **Carrot**.|
|`Check user channels`|Включение (True)/отключение (False) режима разграничения уровня доступа учётных записей к объектам базы данных.|

**Раздел** `Digital Assets`

| Наименование параметра | Назначение                                                                                                                                                                                                                                                                          |
| ---------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Directory`            | Указание директории (пути) к папке, в которую будут сохраняться вся мультимедийная информация.                                                                                                                                                                                      |
| `Copy Assets`          | Включение (True)/отключение (False) режима передачи ассетов на **Carrot Server**. В случае если параметр выключен, то в момент создания ассета указывается только директория (путь) до самого файла, что повышает производительность в случае использования файлов большого объёма. |

**Раздел** `GPIO`

| Наименование параметра        | Назначение                                                              |
| ----------------------------- | ----------------------------------------------------------------------- |
| `Keep UE Event Active Status` | Вызов одного и того же стейта при воспроизведения события из плейлиста. |

**Раздел** `III Protocol Commands`

| Наименование параметра | Назначение                                                                                                                                                                                                                                                                                                                                                    |
| ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Use STOP`             | Включение (True)/отключение (False) режима логики работы (воспроизведения медиа) playout системы **Dalet**. В случае отключения данного параметра, взаимодействие с **Dalet** происходит при помощи протокола III, позволяющего воспроизводить в последовательном режиме шаблоны (игнорируя внутреннюю команду STOP **Dalet**) без их обязательной остановки. |

**Раздел** `License`

| Наименование параметра | Назначение                       |
| ---------------------- | -------------------------------- |
| `License Key`          | Ввод лицензионного ключа Carrot. |

>Лицензионный ключ необходим для получения доступа к функционалу работы **Carrot**. В случае отсутствия лицензионного ключа, функционал работы будет ограничен.
>
>Ввод лицензионного ключа **Carrot** рекомендуется проводить совместно со специалистами технической поддержки **Carrot Broadcast**. 

**Раздел** `Miscellaneous`

| Наименование параметра | Назначение                                                                                                                                                                                                                                        |
| ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Hide to Tray`         | Включение (True)/отключение (False) режима, в котором при закрытии окна **Carrot Server** с помощью кнопки `✕` (используемая по умолчанию в стандартном окне Windows) происходит его скрытие в системную область уведомлений (панель управления). |

**Раздел** `Replication`

| Наименование параметра | Назначение                                                                               |
| ---------------------- | ---------------------------------------------------------------------------------------- |
| `Replication Hosts`    | Указание IP-адресов рабочих станций задействованных в репликации (синхронизации) данных. |

>Для корректного запуска процесса репликации, необходимо убедиться, что на рабочих станциях запущено приложение **Carrot Server**
>
>В параметре `Replication Hosts` первый указываемый IP-адрес **Carrot Server** является основным (мастером).

| | |
|-------------------|----------|
|`Local IP for Replication`|Указание локального (текущего) IP-адреса рабочей станции задействованной в репликации (синхронизации) данных.|

**Раздел** `Resource Manager`

| Наименование параметра | Назначение                                                                                                         |
| ---------------------- | ------------------------------------------------------------------------------------------------------------------ |
| `Use Preloading`       | Включение (True)/отключение (False) режима предварительной загрузки ивентов в **Web Playlist (Carrot Dashboard)**. |
| `Preload Count`        | Указание количества необходимых ивентов для их предварительной загрузки в **Web Playlist (Carrot Dashboard)**.     |

>Функционал параметра `Preload Count` задействуется в случае включённого параметра `Use Preloading`.
>
>Значение параметра  `Preload Count`  должно быть больше "0".

| | |
|-------------------|----------|
|`MOS Preload`|Включение режима предварительной загрузки ивентов по протоколу MOS в **Web Playlist (Carrot Dashboard)**.|

**Раздел** `Statiscs`

| Наименование параметра | Назначение                                                                                                                  |
| ---------------------- | --------------------------------------------------------------------------------------------------------------------------- |
| `Collect Statistic`    | Включение (True)/отключение (False) режима сбора статистических данных по используемой производительности аппаратной части. |

>Статистические данные отображаются в приложении **System Monitor**.

**Раздел** `WebSocket`

|Наименование параметра|Назначение|
|-------------------|----------|
|`Certificate`|Указание директории (пути) к сертификату шифрования.|

>Сертификат необходим для установления соединения защищённым шифрованием. Сертификат представляет из себя файл формата ".pfx".

| | |
|-------------------|----------|
|`Certificate Password`|Ввод пароля сертификата шифрования.|
|`Secure Connection`|Включение (True)/отключение (False) режима зашифрованного соединения **Carrot Server**.|
|`Heartbeat interval, sec`|Указание временного интервала для отправки heartbeat сообщений с целью предотвращения обрыва соединения.|
 
###### Функциональный элемент `Exit`

После взаимодействия с функциональным элементом `Exit` завершается работа и закрывается окно приложения **Carrot Server**.

##### Кнопка `Tools`

![CS Tools Button](..\images\1.1.5\Carrot%20Server\CS%20Tools%20Button.png)

При взаимодействии с кнопкой `Tools` отображается перечень функциональных элементов, назначение которых представлено в таблице ниже.

| Наименование функциональной кнопки | Назначение                                                                   |
| ---------------------------------- | ---------------------------------------------------------------------------- |
| `Change Administrator Password`    | Смена пароля администратора.                                                 |
| `Reset Event Status`               | Обновление поля компонентов для корректного отображения активных приложений. |
| `Set Server As Master`             | Определение текущего **Carrot Server** в качестве "Мастера" (основного).     |

>**Основной (мастер)** сервер отображается в области **"Данные процесса репликации"** как `Replication Master = True`, а резервный (запасной) как `Replication Master = False`
>
>Сервера, которые не участвуют в процессе репликации (синхронизации) отображаются как `Replication Master = True`. 

| | |
|-------------------|----------|
|`Check Other Servers`|Проверка определения сервера в качестве **основного (мастера)** или **резервного**.|
|`Replicate Database`|Запуск процесса репликации (синхронизации) базы данных **Carrot Server**.|
|`Export DB file`|Экспорт базы данных **Carrot Server**.|
|`Export DB objects`|Экспорт объектов базы данных **Carrot Server**.|
|`Import DB file`|Импорт базы данных **Carrot Server**.|
|`Import DB objects`|Импорт объектов базы данных **Carrot Server**.|
|`Web`||
|`DataStream`||
|`Update DB to current Version`|Обновление базы данных до текущей версии **Carrot**.|
|`Remove Inaccessible DB Objects`|Удаление недоступных объектов в базе данных **Carrot Server**.|

##### Кнопка `Help`

![CS Help Button](..\images\1.1.5\Carrot%20Server\CS%20Help%20Button.png)

При взаимодействии с кнопкой `Help` отображается функциональный элемент `About...`, открывающий окно **"About Carrot Server"** содержащее сведения о текущей версии приложения **Carrot Server**.

![CS About Window](..\images\1.1.5\Carrot%20Server\CS%20About%20Window.png)

#### Область "Основное рабочее пространство Carrot Server"

![CS Main Workspace](..\images\1.1.5\Carrot%20Server\CS%20Main%20Workspace.png)

Область **"Основное рабочее пространство Carrot Server"** структурно состоит из элементов представленных в таблице ниже.

| Наименование элемента           | Назначение                                             |
| ------------------------------- | ------------------------------------------------------ |
| Кнопка `Disconect Selected` (1) | Отключение выбранного приложения от **Carrot Server**. |
| Кнопка `Refresh` (2)            | Обновление формируемого списка **поля подключений**.   |
>Применение кнопки `Refresh` необходимо в том случае, если известно, что подключение существует, но оно не отображается в **поле подключений**.
>
>При взаимодействии с кнопкой `Refresh` активируется цикл непрерывного обновления списка в **поле подключений**. В случае отображения всех подключений, необходимо прервать цикл, путём повторного взаимодействия с кнопкой.

| | |
|-------------------|----------|
| **Поле подключений** (3)   |   Отображение сведений о подключенных (запущенных) приложениях **Carrot**. |
>**"Поле подключений"** отображает следующие сведения о подключенных приложениях:
>- **IP-адрес** - отображение числового идентификатора рабочей станции или сервера на которых были запущены приложения **Carrot**;
>- **App** - отображение сведений о наименовании подключенного (запущенного) приложения **Carrot** на рабочей станции или сервере;
>- **Object** - отображение сведений о наименовании объекта, используемого в подключённом (запущенном) приложении **Carrot**;
>- **Last response** - отображение сведений о последнем полученном сообщении от подключенного (запущенного) приложения **Carrot**.

#### Область "Данные процесса репликации"

![CS Replication Toolbar](..\images\1.1.5\Carrot%20Server\CS%20Replication%20Toolbar.png)

Область **"Данные процесса репликации"** предназначена для отображения сведений (параметров) о состоянии репликации (синхронизации) **Carrot Server**. Перечень отображаемых сведений (параметров) представлен в таблице ниже.

| Наименование сведения (параметра) | Назначение                                                                                              |
| --------------------------------- | ------------------------------------------------------------------------------------------------------- |
| **Replication Master**            | Отображение сведений о присвоенном состоянии (основной (True) или резервный (False)) **Carrot Server**. |
| **DB replication Progress**       | Отображение количества реплицируемых (синхронизируемых) данных.                                         |
>При завершении процесса репликации (синхронизации), у параметра **"DB replication Progress"** отобразится сообщение **"Replication Completed!"**.


### Настройка репликации

#### Назначение

Репликация (синхронизация) представляет из себя процесс копирования данных между серверами (рабочими станциями). Таким образом, изменения, сделанные в одной копии, учитываются и в других копиях.

>Репликация данных часто используется в целях резервного копирования информации.

#### Первоначальная настройка

Как было изложено ранее, в процессе репликации участвуют несколько серверов. 

>Стоит отметить, что настройка репликации часто зависит от условий конкретного проекта, количества используемой вычислительной техники и прочих факторов.

Рассмотрим пример с участием 2-х серверов со следующими IP-адресами:

* `192.168.1.1` - будет являться резервным серверном;
* `192.168.1.2` - будет являться мастер-сервером (основным).

В настройках `Carrot Server` каждого сервера необходимо найти раздел `Replication` со следующими параметрами:

* `Replication Hosts` - предназначен для указания IP-адреса(ов) резервного(ых) сервера(ов) с которым синхронизируется база данных Carrot Server;
* `Local IP for Replication` - предназначен для указания локального IP-адреса сервера, с целью репликации данных.

Внешний вид расположения раздела `Replication`:

![Replication_Carrot_server](..\images\Replication\Элемент%20Settings%20Раздел%20Replication.jpg)

В разделе `Replication` для сервера с IP-адресом `192.168.1.1` ввести:

|Наименование параметра|Значение|
|---------------------|---------|
|`Replication Hosts`|`192.168.1.2, 192.168.1.1`|
|`Local IP for Replication`|`192.168.1.1`|

>В случае, если необходимо указать несколько IP-адресов в параметре `Replication Hosts`, следует вводить исключительно номера сетей и узлов рабочих станций (IP-адреса) разделённых символом: `,`.
>
>Важно обратить внимание, что IP-адреса серверов вводятся в порядке функционального предназначения каждого.
>
>В случае, если введенён некорректный IP-адрес сервера, например для сервера с локальным IP-адресом `192.168.1.1` будет указан `192.168.1.2`, то произойдёт ошибка в определении сервера как "Мастера" при нештатной ситуации, таким образом сервер не возьмёт на себя *резервную* роль.

В результате введённых данных для сервера с IP-адресом `192.168.1.1` получим:

![ReplicationServer1](..\images\Replication\Replication_Server_1.jpg)

В разделе `Replication` для сервера с IP-адресом `192.168.1.2` ввести:

|Наименование параметра|Значение|
|---------------------|---------|
|`Replication Hosts`|`192.168.1.2, 192.168.1.1`|
|`Local IP for Replication`|`192.168.1.2`|

В результате введённых данных для сервера с IP-адресом `192.168.1.2` получим:

![ReplicationServer2](..\images\Replication\Replication%20Server%202.png)

>В случае, если введены некорректные данные (не указан какой-либо из серверов, IP-адрес указан с ошибкой или т.п.) одного из сервера, то при пропытке запуска репликации мастер-сервер прерывает подключение и процесс прерывается.
>
>Если в проекте участвует более 2-х серверов, то процесс их настройки будет аналогичен изложенному, только с указанием нужного (большего) количества IP-адресов в параметре `Replication Hosts`.

В результате введённых настроек для каждого сервера получим, что при внезапном прекращении работы мастер-сервера (`192.168.1.2`), происходит переключение на резервный сервер (`192.168.1.1`).


>Когда сервер является "мастером", у него появляется статус `Replication Master = True` в статус баре Carrot Server.
>
>Стоит учитывать, что при наличии большего количества резервных серверов, процесс перехода на "резерв" будет происходить до самой последней.


#### Принцип работы в Carrot

Когда сервер находится в режиме репликации, он сравнивает в параметре `Replication Hosts` введённые данные об IP-адресах серверов поочерёдно, так, например, если мастер-сервер с IP-адресом `192.168.1.2` обнаруживает аналогичный IP-адрес, то он считает себя "главным" (мастер-сервером) и в статус-баре появляется соответствующее сообщение `Replication Master = True`.

В случае, если IP-адрес не совпадает, то сервером происходит подключение к другим введённым IP-аресам. Таким образом, возможно несколько вариантов определения сервера:

* В случае, если настраиваемый сервер успешно подключился к мастер-серверу (`Replication Master = True`), то он определяется как резервный со статусом `Replication Master = False`;
* В случае, если настраиваемый сервер успешно подключился к резервному серверу, то последний передаёт информацию о сервере со статусом "мастер", в результате чего, у настраиваемого сервера отсутствует необходимость в поиске конкретного IP-адреса среди введённых в параметр `Replication Hosts` и подключение осуществляется напрямую;
* В случае, если настраиваемому серверу не удаётся подключиться к одному из серверов по IP-адресу, то происходит подключение к следующему IP-адресу, введённому в параметр `Replication Hosts`.

>Основным функционалом сервера со статусом **"Мастер"** является обработка поступающих команд от клиентов.
>
>Основным функционалом резервного сервера является синхронизация актуальной базы данных и ассетов мастер-сервера.
>
>Во избежание некорректного запуска процесса репликации, рекомендуется запускать сервер в том порядке, который указан в параметре `Replication Hosts`.

#### Частые ситуации

##### Что делать, если у меня два "Мастера"?

В случае, если обнаружена ситуация, при которой два сервера определяются как "Мастер" (со статусом `Replication Master = True`), необходимо придерживаться следующих шагов:

* определить сервер, который будет выполнять функцию "Мастера";
* в Carrot Server, нажать кнопку по следующему пути `Tools`/`Check Other Servers`.

![Button_Check_Other_Servers](..\images\Replication\Кнопка%20Check%20Other%20Servers.png)

После указанных действий, сервер произведёт поиск других северов по указанным IP-адресам в параметре `Replication Hosts`. В случае установления успешного соединения, сервер примет статус "Резервный".

>Подобные ситуации, при которых два сервера определяются как "Мастер", как правило, возникают при не соблюдении порядка их запуска (не в соответствии с порядком, указанным в параметре `Replication Hosts`).

##### Как поменять "Мастера" и не выключать сервер?**

В случаях, когда необходимо изменить статус сервера с "Резервного" на "Мастер", следует придерживаться следующих шагов:

* определить сервер со статусом "Резервный", который будет выполнять функцию "Мастера";
* в Carrot Server, нажать кнопку по следующему пути `Tools`/`Set Server As Master`.

![Button_Set_Server_As_Master](..\images\Replication\Кнопка%20Set%20Server%20As%20Master.png)

>Кнопка `Set Server As Master` имеет Hotkey `Ctrl+Shift+S`

В результате проделанных действий, резервный сервер запросит у мастер-сервера соответствующие права, после получения которых, произойдёт переключение клиентов и серверов к нему.

>Изложенная операция возможна, только в тех случаях, когда резервный сервер произвёл репликацию с мастер-сервером. 
>
>При успешном завершении репликации в статус-баре Carrot Server появится параметр `Replication Completed!`

##### Что делать, если я неправильно запустил сервера и у меня удалилась актуальная база данных?

В случае некорректного запуска серверов, важно помнить, что перед запуском репликации, акутальная версия базы данных упаковывается в архив формата .zip по следующей директории (пути):

`C:\Users\"ИМЯ_КОМПЬЮТЕРА"\AppData\Local\Carrot\backups\`

Для актуализации информации, необходимо распаковать архив в папку, в которой содержится текущая база данных. 



## Launcher


### Назначение

**Launcher** предназначен для регистрации рабочих станций и обеспечения запуска на них схем **Carrot Engine**.
### Описание пользовательского интерфейса

![L Main Window](..\images\1.1.5\Launcher\L%20Main%20Window.png)

Пользовательский интерфейс приложения **Launcher** состоит из трёх кнопок, а именно:
- `File` (1);
- `Tools` (2);
- `Help` (3).

#### Кнопка `File`

![L File Button](..\images\1.1.5\Launcher\L%20File%20Button.png)

При взаимодействии с кнопкой `File` отображаются два функциональных элемента, назначение которых представлено в таблице ниже.

| Наименование функционального элемента | Назначение                                                          |
| ------------------------------------- | ------------------------------------------------------------------- |
| `Settings`                            | Открытие окна **"Settings"** для настройки параметров **Launcher**. |
| `Exit`                                | Завершение работы **Launcher**.                                     |

##### Функциональный элемент `Settings`

После взаимодействия с функциональным элементом `Settings` откроется окно **"Settings"**, предназначенное для настроек параметров **Launcher**.

![L Settings](..\images\1.1.5\Launcher\L%20Settings.png)

Настраиваемые параметры **Launcher** распределены по разделам, перечень и назначение которых изложены в таблицах ниже.


**Раздел** `Assets`

| Наименование параметра | Назначение                                                              |
| ---------------------- | ----------------------------------------------------------------------- |
| `Additional Assets`    | Указание директории (пути) к вспомогательной мультимедийной информации. |

>К вспомогательной мультимедийной информации относятся объекты, которые используются в **Web Playlist (Carrot Dashboard)** (изображения, аудио и видео материалы).

|                   |                                                |
| ----------------- | ---------------------------------------------- |
| `Original Assets` | Указание директории (пути) к основным объекта. |

>К основным объектам относятся экспортированные из Unreal Engine и Adobe After Effects в базу данных **Carrot** шаблоны. 


**Раздел** `Delays`

| Наименование параметра         | Назначение                                                                                                                                                                                                                   |
| ------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Input Delay`                  | Установка входной задержки для видео. В зависимости от использования, применимо к **BmdTrackedInput** и **AJATrackedInput**.                                                                                                 |
| `Secondary Delay`              | Установка задержки для изображения. В зависимости от использования, применимо к **BmdTrackedInput** и **AJATrackedInput**                                                                                                    |
| `AE Delay`                     | Установка задержки трекинга для AE шаблонов.                                                                                                                                                                                 |
| `Keyer Delay`                  | Установка задержки трекинга от Keyer.                                                                                                                                                                                        |
| `Audio Delay, ms`              | Установка задержки для звука при использовании **AJA** (измеряется в "мс" (миллисекунды)).                                                                                                                                   |
| `XR Delay`                     | Установка задержки для выдачи изображения на XR-выходе.                                                                                                                                                                      |
| `UE Draw Delay`                | Установка задержки отрисовки UE проектов на XR-выходе.                                                                                                                                                                       |
| `Max UE draw Delay Buffer`     | Установка максимального значения задержки UE проектов на XR-выходе.                                                                                                                                                          |
| `Lock UE Delay To Input Delay` | Установка фиксированного промежутка привязки задержки отрисовки UE проектов (**UE Draw Delay**) к входной задержке видео (**Input Delay**). Применяется в ситуациях, когда различные UE проекты могут иметь разную задержку. |
| `Show all Delays`              | Включение (True)/Отключение (False) режима отображения в Carrot Engine настроек задержки, а именно: **Tracking Delay AE**, **Secondary Delay** и **Audio Delay, ms**.                                                        |


**Раздел** `Input`

| Наименование параметра | Назначение                                                                                                                                     |
| ---------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| `GPIO Enabled`         | Включение (True)/Отключение (False) интерфейса связи GPIO.                                                                                     |
| `MIDI Enabled`         | Включение (True)/Отключение (False) протокола передачи данных MIDI.                                                                            |
| `Macro Enabled`        | Включение (True)/Отключение (False) поддержки макросов (команд) для управляения устройствами с программируемыми клавишами (Stream Deck и др.). |

>Во избежание некорректного взаимодействия с устройствами при применении параметров `GPIO Enabled`, `MIDI Enabled` и `Macro Enabled`, рекомендуется использовать приложение **Input Devices**.


**Раздел** `Launch`

| Наименование параметра | Назначение                                         |
| ---------------------- | -------------------------------------------------- |
| `Folder Path`          | Выбор директории (пути) для запуска Carrot Engine. |

>Параметр **Folder Path** состоит из двух настроек:
>* `Registry` - использование файлов из директории (пути) в реестре (инициализизация пути происходит через **Init Settings**);
>* `Local` - использует файлы из папки в которой был запущен **Launcher**. Применение данной настройки используется при работе с различными версиями **Carrot**.


**Раздел** `Licence`

| Наименование параметра | Назначение                       |
| ---------------------- | -------------------------------- |
| `License Key`          | Ввод лицензионного ключа Carrot. |

>Лицензионный ключ необходим для получения доступа к функционалу работы **Carrot**. В случае отсутствия лицензионного ключа, функционал работы будет ограничен.
>
>Ввод лицензионного ключа **Carrot** рекомендуется проводить совместно со специалистами технической поддержки **Carrot Broadcast**. 


**Раздел** `Network`

| Наименование параметра | Назначение                                                                                             |
| ---------------------- | ------------------------------------------------------------------------------------------------------ |
| `Silent`               | Включение (True)/Отключение (False) режима подключения к серверу без отображения сообщений об ошибках. |
| `Server Host`          | Ввод наименования или IP-адреса рабочей станции, на котором планируется запуск схем **Carrot Engine**. |

>В случае использования локальной рабочей станции, в поле параметра `Server Host` необходимо ввести значение `localhost` (данное значение содержит информацию об IP-адресе локальной рабочей станции).

| | |
|-------------------|----------|
|`Secure`|Включение (True)/Отключение (False) режима защищённого сетевого обмена.|

>Дополнительную отладку параметра `Secure` необходимо осуществлять в параметрах приложения **Carrot Server**.

**Раздел** `Processing`

| Наименование параметра | Назначение                                     |
| ---------------------- | ---------------------------------------------- |
| `Watermark Filepath`   | Указание директории (пути) к "водяному знаку". |

>В качестве водяного знака возможно использование любого изображения, которое отображается в приложении **Carrot Engine**.

| | |
|-------------------|----------|
|`Dummy Filepath`|Указание директории (пути) к изображению, заменяющему основной выход. Применимо для проведения технической профилактики.|
|`Video Threads Count`|Указание количества логических процессов (параллельных потоков) для декодировки видео.|

>По умолчанию в поле Video Threads Count указывается значение "6".

| | |
|-------------------|----------|
|`Dedicated Processing`|Включение (True)/Отключение (False) режима использования потока для декодировки видео.|
|`Use Video Buffer`|Включение (True)/Отключение (False) режима, при котором используются заранее подготовленные буферы кадров, способствующие воспроизведению видео с нулевого кадра без задержки и падения производительности.|
|`Use Video GPU Decoder`|Включение (True)/Отключение (False) режима декодировки видео с помощью видеокарты.|

>Использование вычислительных мощностей видеокарты возможно при обработке кодеков H.265 в шаблонах Adobe After Effects.

| | |
|-------------------|----------|
|`Foreground`|Включение (True)/Отключение (False) режима при котором окно **Carrot Engine** открывается каждые 10 секунд. Открытие окна рендер-движка происходит поверх других окон.|
|`Keyer`|Выбор типа Keyer'а между JabKeyer или GreenKeyer.|
|`Print Debug Info`||
|`Use GPU Memory`|Включение (True)/Отключение (False) режима использования видеопамяти (памяти видеокарты) для работы с PNG-секвенциями. Данный режим положительно сказывается на производительности (ускорение загрузки и уменьшение нагрузки на систему), но при этом задействует больший объём видеопамяти.|
|`Upload Contexts Count`|Определение количества параллельных потоков, обрабатывающих входящие видеосигналы в случае, если в настройках input `BmdInput` используется параметр `Use Resource Thread`.|


**Раздел** `Recording`

| Наименование параметра | Назначение                                                                          |
| ---------------------- | ----------------------------------------------------------------------------------- |
| `Allow Recording`      | Включение (True)/Отключение (False) режима записи видеосигнала в **Carrot Engine**. |

>Для записи видеосигнала в **Carrot Engine** реализована с помощью кнопки **F9**.

| | |
|-------------------|----------|
|`Recording Directory`|Указание директории (пути) для сохранения записанного видеосигнала.|
|`Recording FPS`|Настройка количества кадров в секунду при записи видеосигнала.|
|`Recording Bitrate`|Указание среднего битрейта при записи видеосигнала. Измеряется в "кбит/с".|
|`MaxBitrate`|Указание максимального битрейта при записи видеосигнала. Измеряется в "кбит/с".|

**Раздел** `Render`

| Наименование параметра         | Назначение                                                |
| ------------------------------ | --------------------------------------------------------- |
| `Initial Render Target Width`  | Указание ширины *рендер таргета*. Измеряется в "пиксель". |
| `Initial Render Target Height` | Указание высоты *рендер таргета*. Измеряется в "пиксель"  |

>**Рендер таргет** - термин, используемый в Unreal Engine, представляющий из себя текстуру, на которую производится вывод изображения. Параметры `Initial Render Target Width` и `Initial Render Target Height` задают первоначальный размер текстуры, который должен быть равен наибольшему размеру среди нод схемы и композиций запускаемых шаблонов. В случае не соблюдения изложенных условий, система создаёт текстуру необходимого размера в автоматическом режиме (снижает производительность).

| | |
|-------------------|----------|
|`Propagation of Invisibility`|Включение (True)/Отключение (False) режима, при котором неиспользуемые слои, в том числе с выключенной видимостью не обрабатываются (применимо для улучшения производительности).|


**Раздел** `Resource Manager`

|Наименование параметра|Назначение|
|-------------------|----------|
|`Unloading Event Type`|Выбор способа выгрузки шаблона в состояние "Unloaded".|

>Параметр `Unloading Event Type` содержит несколько настроек выгрузки шаблона:
>- `Manual` - ручной способ (происходит по соответствующей команде в **Web Playlist (Carrot Dashboard)**);
>- `Immediatly` - сразу после проигрывания в **Web Playlist (Carrot Dashboard)** шаблона ;
>- `After Timer` -  таймер выгрузки шаблона (установка необходимого времени производится в параметре `Unload Timer`);
>- `EventsPlayedAfter` - после воспроизведения определённого количества ивентов (установка необходимого количества воспроизводимых ивентов указывается в параметре `Unload After N Events`).

| | |
|-------------------|----------|
|`Unload Timer`|Указывается время, необходимое для смены статуса ивента в состояние **"Unloaded"** после его установки.|

> Функционал параметра `Unload Timer` задействуется в том случае, когда выбрана настройка `After Timer` параметра `Unloading Event Type`

| | |
|-------------------|----------|
|`Unload After N Events`|Указывается количество воспроизводимых ивентов, необходимых для смены статуса ивента в состояние **"Unloaded"**.|

> Функционал параметра `Unload After N Events` задействуется в том случае, когда выбрана настройка `EventsPlayedAfter` параметра `Unloading Event Type`


**Раздел** `Scheduling`

| Наименование параметра | Назначение                                                                                                                                                                          |
| ---------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Skip Graphic After`   | Указание временного интервала, после которого команда на показ графики будет игнорироваться. Измеряется в "мс" (миллисекундах). Применяется при взаимодействии с playout-системами. |

> Например, если указать в параметре значение `500`, тогда в случае, если пришла команда показать графику в 13:49:23:120, а текущее время 13:49:23:740, то графика показываться не будет


**Раздел** `Scripting`

| Наименование параметра  | Назначение                                                                                                                                                                                                  |
| ----------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Enable Scripts Thread` | Включение (True)/Отключение (False) режима обработки скриптов шаблона в отдельном потоко передачи скриптов. Применимо для улучшения производительности, но запуск скрипта в текущем кадре не гарантируется. |
| `Examine Scripts`       | Включение (True)/Отключение (False) режима проверки скрипта на ошибки перед загрузкой шаблона. В случае если обнаружены ошибки, то загрузка шаблона прервётся.                                              |


**Раздел** `Statistics`

| Наименование параметра | Назначение                                                                                                                                                                                         |
| ---------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Collect Statistics`   | Включение (True)/Отключение (False) режима сбора статистических данных по задействованной производительности аппаратной части. Статистические данные отображаются в приложении **System Monitor**. |


**Раздел** `Tracking`

| Наименование параметра       | Назначение                                                                                                                                   |
| ---------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| `Use Tracking Interpolation` | Включение (True)/Отключение (False) режима интерполяции приходящей трекинг информации. Применимо для обеспечения плавности движений объекта. |
| `Restore Buffer Count`       | Включение (True)/Отключение (False) режима восстановления задержки по трекингу при неподвижной камере.                                       |

> Параметры `Use Tracking Interpolation` и `Restore Buffer Count` работают в том случае, когда в настройках input'ов **BmdTrackedInput** или **AJATrackedInput** параметру `Use Delta MS` присвоено значение `False`.


**Раздел** `UI`

| Наименование параметра | Назначение                                                                                                 |
| ---------------------- | ---------------------------------------------------------------------------------------------------------- |
| `Show Connection Info` | Включение (True)/Отключение (False) режима отображения в главном окне информации о подключенном IP-адресе. |
| `Keyer Fluent Scroll`  | Включение (True)/Отключение (False) режима непрерывной прокрутки в настройка Keyer.                        |

> В случае, если параметр `Keyer Fluent Scroll` отключён, то режим непрерывной прокрутки будет остановлен при наведении курсора мыши на один из выбираемых элементов управления.




**Раздел** `Videowall`

| Наименование параметра | Назначение                                                                                                                                                                                                                              |
| ---------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Override`             | Включение (True)/Отключение (False) режима отображения собственных параметров при режиме FullScreen (функциональная клавиша F2). Изменение параметров отображения происходит с помощью настроек параметров `X`, `Y`, `Width` и `Height` |
| `X`                    | Указание отступа от левого края. Измеряется в "пиксель".                                                                                                                                                                                |
| `Y`                    | Указание отсупа от верхнего края. Измеряется в "пиксель".                                                                                                                                                                               |
| `Width`                | Указание ширины изображения. Измеряется в "пиксель".                                                                                                                                                                                    |
| `Height`               | Указание высоты изображения. Измеряется в "пиксель".                                                                                                                                                                                    |


##### Функциональный элемент `Exit`

После взаимодействия с функциональным элементом `Exit` завершается работа и закрывается окно приложения **Launcher**.

#### Кнопка `Tools`

![L Tools Button](..\images\1.1.5\Launcher\L%20Tools%20Button.png)

При взаимодействии с кнопкой `Tools` отображается функциональный элемент `Workstation Registration` , предназначенный для регистрации рабочих станций и настройки её **input'ов** и **output'ов**.

##### Функциональный элемент `Workstation Registration`

После взаимодействия с функциональным элементом `Workstation Registration` откроется окно **"Workstation Registration"**.

![L WR Window](..\images\1.1.5\Launcher\L%20WR%20Window.png)

Окно **"Workstation Registration"** структурно состоит из следующих элементов представленных в таблице ниже.

| Наименование элемента                                              | Назначение                                                                                                                         |
| ------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------- |
| Кнопка `File` (1)                                                  | Импорт и экспорт настроек рабочей станции.                                                                                         |
| Область **"Регистрация рабочей станции"** (2)                      | Администрирование рабочих станций.                                                                                                 |
| Область **"Настройка модулей input и output рабочей станции"** (3) | Формирование модулей input и output рабочей станции, с целью дальнейшего их использования при проектировке схем **Carrot Engine**. |

###### Кнопка `File`

![L WR File Button](..\images\1.1.5\Launcher\L%20WR%20File%20Button.png)

Кнопка `File` включает в себя функциональные элементы, перечень и назначение которых представлено в таблице ниже.

| Наименование функционального элемента | Назначение                                               |
| ------------------------------------- | -------------------------------------------------------- |
| `Import...`                           | Импортирование заготовленных настроек рабочей станции.   |
| `Export...`                           | Экспортирование сформированных настроек рабочей станции. |

###### Область **"Регистрация рабочей станции"**

![L WR Area](..\images\1.1.5\Launcher\L%20WR%20Area.png)

Область **"Регистрация рабочей станции"** включает в себя функциональные элементы перечень и назначение которых представлены в таблице ниже.

| Наименование функционального элемента | Назначение                                                   |
| ------------------------------------- | ------------------------------------------------------------ |
| Поле `Name` (1)                       | Присвоение уникального имени (наименования) рабочей станции. |

>По умолчанию, в качестве наименования рабочей станции используется имя текущего устройства.

|                                |                                                                                                                 |
| ------------------------------ | --------------------------------------------------------------------------------------------------------------- |
| Кнопка `Register / Update` (2) | Регистрация рабочей станции, в том числе обновление её настроек (в случае, если не было изменено наименование). |
>После взаимодействия с кнопкой `Register / Update` отрывается окно **"Workstations"**. содержащее список зарегистрированных рабочих станций.
>
>![L Workstations Window](..\images\1.1.5\Launcher\L%20Workstations%20Window.png)
>Окно **"Workstations"** содержит **"список зарегистрированных рабочих станций"** (1). Для регистрации рабочей станции, необходимо нажать кнопку `ОК` (2).


|                         |                                                        |
| ----------------------- | ------------------------------------------------------ |
| Кнопка `Unregister` (3) | Удаление рабочей станции из списка зарегистрированных. |


###### Область **"Настройка модулей inputs и outputs рабочей станции"**

![L WR Input Output Area](..\images\1.1.5\Launcher\L%20WR%20Input%20Output%20Area.png)

Область **"Настройка модулей input и output рабочей станции"** включает в себя функциональные элементы перечень и назначение которых представлены в таблице ниже.

| Наименование функционального элемента   | Назначение                                                                     |
| --------------------------------------- | ------------------------------------------------------------------------------ |
| Область **"Inputs"** (1)                | Добавление (`+`)/Удаление (`-`) модулей **Inputs**.                            |

>Перечень и назначение доступных модулей **"Inputs"** представлены в таблице ниже
>
>| Наименование модуля **Input**  | Назначение                                                                     |
>| ----------------------------- | -------------- |
>|`Aja Tracked Input`|Поддержка работы (приём входного видеосигнала) с картами видеозахвата **AJA**.|
>|`BMD Input`|Поддержка работы (приём входного видеосигнала) с картами видеозахвата **Blackmagic Design**.|
>|`BMD Tracked Input`|Поддержка работы (приём входного сигнала) с картами видеозахвата **Blackmagic Design** при приёме трекинговых данных по локальной сети.|
>|`Texture Input`|Вывод видео-сигнала или видеофайла на устройстве.|
>|`Tracking Data`|Вывод трекинг данных.|
>|`UE Input`|Отображение запущенной UE сцены c трекингом.|
>|`WebSocket Stream Input`|Используется для вывода видеосигнала или аудиосигнала с устройства подключённого к данной рабочей станции.|


| |                                                               |
| --------------------------------------- | ------------------------------------------------------------------------------ |
| Область **"Outputs"** (2)               | Добавление (`+`)/Удаление (`-`) модулей **Outputs** в рабочую станцию.         |

>Перечень и назначение доступных модулей **"Outputs"** представлены в таблице ниже
>
>| Наименование модуля **Output**  | Назначение                                                                     |
>| ----------------------------- | -------------- |
>|`AJA Output`|Вывод видео-сигнала на карту видеозахвата **AJA**.|
>|`Bmd Fill/Key Output`|Вывод `Fill` и `Key` сигналов на карту видеозахвата **Blackmagic Design, Decklink**.|
>|`Bmd Output`|Вывод видео-сигнала на карту видеозахвата **Blackmagic Design, Decklink**.|
>|`Screen Output`|Вывод видео-сигнала на экран рабочей станции.|
>|`WebSocket Stream Output`|Вывод видео-сигнала с одной рабочей станции на другую (в рамках локальной сети).|
>|`Stream Output`|Вывод видео-сигнала на стриминговый сервис.|


| |                                                               |
| --------------------------------------- | ------------------------------------------------------------------------------ |
| Область **"Properties"** (3)            | Настройка параметров модулей **Inputs** и **Outputs**.                         |

>Перечень и назначение параметров для модулей **"Inputs"** представлены в таблицах ниже.
>
>`AJA Tracked Input`
>
>>Раздел **"AJA"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Device`|Выбор карты видеозахвата **AJA** из списка подключенных для взаимодействия с **Carrot**.|
>>|`Mode`|Выбор формата изображения поступающего с камеры.|
>>|`Input Source`|Выбор интерфейса ввода (SDI) видео-сигнала.|
>>|`Frame Buffer Format`|Выбор способа обработки (кодировки) видео-сигнала.|
>>|`Flip Fields`|Включение режима поочерёдной обработки и отображения полей (для interlaced-сигнала). В случае если у изображения на выходе имеется эффект подрагивания, следует изменить режим работы параметра.|
>>
>>`Dimension`
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Width`|Указание ширины обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>|`Height`|Указание высоты обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>
>>Раздел **"Dimension"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Width`|Указание ширины обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>|`Height`|Указание высоты обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>
>>Раздел **"Input"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Name`|Ввод имени модуля, отображаемого в **System Monitor** при проектировке схем **Carrot Engine**.|
>>
>>Раздел **"Process"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Enable Secondary Video`|Включение режима использования отдельного изображения для передачи в UE, позволяющего указать задержку отличную от основного тракта. Применяется для виртуального пролёта камеры.|
>>|`Undistort Secondary Video`|Включение режима, при котором убирается эффект искажения линзы с камеры при виртуальном пролёте камеры.|
>>
>>Раздел **"Tracking"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Correct Zoom`|Включение режима сглаживания неравномерности изменения зума по трекингу.|
>>|`Tracking Index`|Ввод ID трекинга. Применяется для точного определения используемых трекинг систем.|
>>|`Tracking Delay`|Указание входной задержки для трекинг данных.| 
>>|`Port`|Ввод порта, в который передаются трекинг данные.|
>>|`Use Delta MS`|Включение режима синхронизации. Измеряется в миллисекундах.| 
>
>`BMD Input`
>
>>Раздел **"DeckLink"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Input Device`|Выбор устройства **BMD** из списка подключенных для взаимодействия с **Carrot**.|
>>|`Input Mode`|Выбор формата изображения поступающего с камеры.|
>>|`Delay`|Указание задержки входного видео-сигнала карты захвата **BMD**.|
>>|`Group ID`|Включение режима синхроннной работы (запуска и остановки) между **BMD Input**. Синхронная работа задействуется в том случае, когда параметр `Group ID` равен между собой и **больше 0**.|
>>|`Wait`|Включение режима привязки рендера графики к такту приходящих кадров в **Input**. В случае, если параметр выключен (False), то рендер графики становится привязан к такту вывода кадров на аутпуте.|
>>|`Use Resource Thread`|Включение режима работы параметра в ресурсном потоке (вне потока рендера). Параметр способствует снижению нагрузки на центральный процессор.|
>>|`Use MipMaps`|Включение метода MIP-текстурирования. Параметр способствует повышению быстродействия и снижению нагрузки на видеокарту, в том числе возможно его использование для размытия изображения.|
>>|`Use Audio Input`|Включение режима обработки аудиопотока на входе карты захвата **BMD**.|
>>
>>Раздел **"Dimension"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Width`|Указание ширины обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>|`Height`|Указание высоты обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>
>>Раздел **"Input"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Name`|Ввод имени модуля, отображаемого в **Carrot Flowchart**.|
>
>`BMD Tracked Input`
>
>>Раздел **"DeckLink"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Device`|Выбор устройства **BMD** из списка подключенных для взаимодействия с **Carrot**.|
>>|`Mode`|Выбор формата изображения поступающего с камеры.|
>>|`Group ID`|Включение режима синхроннной работы (запуска и остановки) между **BMD Tracked Input**. Синхронная работа задействуется в том случае, когда параметр `Group ID` равен между собой и **больше 0**.|
>>|`Use MipMaps`|Включение метода MIP-текстурирования. Параметр способствует повышению быстродействия и снижению нагрузки на видеокарту, в том числе возможно его использование для размытия изображения.|
>>|`Use Audio Input`|Включение режима обработки аудиопотока на входе карты захвата **BMD**.|
>>
>>Раздел **"Dimension"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>`Width`|Указание ширины обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>|`Height`|Указание высоты обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>
>>Раздел **"Input"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Name`|Ввод имени модуля, отображаемого в **Carrot Flowchart**.|
>>
>>Раздел **"Process"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Enable Secondary Video`|Включение режима использования отдельного изображения для передачи в UE, позволяющего указать задержку отличную от основного тракта. Применяется для виртуального пролёта камеры.|
>>|`Undistort Secondary Video`|Включение режима, при котором убирается эффект искажения линзы с камеры при виртуальном пролёте камеры.|
>>
>>Раздел **"Tracking"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Correct Zoom`|Включение режима сглаживания неравномерности изменения зума по трекингу.|
>>|`Tracking Index`|Ввод ID трекинга. Применяется для точного определения используемых трекинг систем.|
>>|`Tracking Delay`|Указание входной задержки для трекинг данных.| 
>>|`Port`|Ввод порта, в который передаются трекинг данные.| 
>>|`Use Delta MS`|Включение режима синхронизации. Измеряется в миллисекундах.| 
>
>`Texture Input`
>
>>Раздел **"Dimension"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Width`|Указание ширины обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>|`Height`|Указание высоты обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>
>>Раздел **"Input"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Name`|Ввод имени модуля, отображаемого в **Carrot Flowchart**.|
>>
>>Раздел **"Прочее"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Filename`|Указание директории (пути) к файлу используемого в качестве текстуры.|
>
>`Tracking Data`
>
>>Раздел **"Input"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Name`|Ввод имени модуля, отображаемого в **Carrot Flowchart**.|
>>
>>Раздел **"Process"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Enable Secondary Video`|Включение режима использования отдельного изображения для передачи в UE, позволяющего указать задержку отличную от основного тракта. Применяется для виртуального пролёта камеры.|
>>|`Undistort Secondary Video`|Включение режима, при котором убирается эффект искажения линзы с камеры при виртуальном пролёте камеры.|
>>
>>Раздел **"Tracking"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`FPS`|Указание количества обрабатываемых кадров в секунду.|
>>|`Low Latency`|Включение режима минимальной задержки при обработке данных через сетевое соединение.|
>>|`Wait`|Включение режима привязки рендера графики к такту приходящих кадров в **Input**. В случае, если параметр выключен (False), то рендер графики становится привязан к такту вывода кадров на аутпуте.|
>>|`Correct Zoom`|Включение режима сглаживания неравномерности изменения зума по трекингу.|
>>|`Tracking Index`|Ввод ID трекинга. Применяется для точного определения используемых трекинг систем.|
>>|`Tracking Delay`|Указание входной задержки для трекинг данных.|
>>|`Port`|Ввод порта, в который передаются трекинг данные.| 
>>|`Use Delta MS`|Включение режима синхронизации. Измеряется в миллисекундах.| 
>
>`UE Input`
>
>>Раздел **"Input"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Name`|Ввод имени модуля, отображаемого в **Carrot Flowchart**.|
>>
>>Раздел **"Process"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Enable Secondary Video`|Включение режима использования отдельного изображения для передачи в UE, позволяющего указать задержку отличную от основного тракта. Применяется для виртуального пролёта камеры.|
>>|`Undistort Secondary Video`|Включение режима, при котором убирается эффект искажения линзы с камеры при виртуальном пролёте камеры.|
>>
>>Раздел **"Tracking"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`FPS`|Указание количества обрабатываемых кадров в секунду.|
>>|`Low Latency`|Включение режима минимальной задержки при обработке данных через сетевое соединение.|
>>|`Wait`|Включение режима привязки рендера графики к такту приходящих кадров в **Input**. В случае, если параметр выключен (False), то рендер графики становится привязан к такту вывода кадров на аутпуте.|
>>|`Correct Zoom`|Включение режима сглаживания неравномерности изменения зума по трекингу.|
>>|`Tracking Index`|Ввод ID трекинга. Применяется для точного определения используемых трекинг систем.|
>>|`Tracking Delay`|Указание входной задержки для трекинг данных.|
>>|`Port`|Ввод порта, в который передаются трекинг данные.|
>>|`Use Delta MS`|Включение режима синхронизации. Измеряется в миллисекундах.| 
>>
>>Раздел **"UE"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Width`|Указание ширины обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>|`Height`|Указание высоты обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>
>`WebSocket Stream Input`
>
>>Раздел **"Audio"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Device`|Выбор аудио-устройства из списка подключенных для взаимодействия с **Carrot**.|
>>
>>Раздел **"Dimension"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Width`|Указание ширины обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>|`Height`|Указание высоты обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>
>>Раздел **"Input"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Name`|Ввод имени модуля, отображаемого в **Carrot Flowchart**.|
>>
>>Раздел **"Secure Connection"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Certificate`|Указание директории (пути) к файлу сертификата формата **.pfx**. Применяется при использовании защифрованного соединения.|
>>|`Certificate Password`|Ввод пароля к сертификату зашифрованного соединения.|
>>|`Secure Connection`|Включение режима зашифрованного соединения.|
>>
>>Раздел **"Stream"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Port`|Ввод порта, в который передаётся аудиосигнал.|
>>|`Audio Delay`|Указание входной задержки для аудио-сигнала.|
>>|`Codec Type`|Выбор способа обработки аудио-сигнала (кодека).|
>>|`Use GPU Decoder`|Включение режима использования **Decoder'a** графического процессора. При выключенном функционале, задействуется **3D**. Рекомендуется использовать при работе с **4K** изображением.|
>>
>>
>>
>Перечень и назначение параметров для модулей **"Outputs"** представлены в таблицах ниже.
>
>`AJA Tracked Input`
>
>>Раздел **"AJA"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Device`|Выбор карты видеозахвата **AJA** из списка подключенных для взаимодействия с **Carrot**.|
>>|`Mode`|Выбор формата изображения поступающего с камеры.|
>>|`Output Destination`|Выбор интерфейса вывода (SDI) видео-сигнала.|
>>|`Frame Buffer Format`|Выбор способа обработки (кодировки) видео-сигнала.|
>>|`Buffer Count`|Ввод задержки на выходе карты видеозахвата **AJA**.|
>>
>>Раздел **"Audio Capture"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Use Audio`|Включение режима обработки аудио.|
>>|`Win LoopBack`|Включение режима, где в выходной сигнал эмбедируется звук, записанный с аудиоустройства Windows. В случае отключения параметра, задействуется проходной (изначальный) эмбедированный аудиосигнал.| 
>>|`Device`|Выбор аудио-устройства из списка подключенных для взаимодействия с **Carrot**.| 
>>
>>Раздел **"Output"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Name`|Ввод имени модуля, отображаемого в **Carrot Flowchart**.|
>>
>>Раздел **"Прочее"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Output Type`|Отображение информации о модуле вывода. Нередактируемый параметр.|
>
>`Bmd Fill/Key Output`
>
>>Раздел **"DeckLink"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`FILL Output Device`|Выбор устройства для передачи в него **Fill-cигнала**.|
>>|`KEY Output Device`|Выбор устройства для передачи в него **Key-cигнала**.|
>>|`Output Mode`|Выбор формата вывода видео-сигнала.|
>>|`Delay`|Указание задержки выходного видео-сигнала карты захвата **BMD**.|
>>|`Fill Matte`|Выбор режима наложения. **Straight**, где информация о прозрачности содержится только в alpha-канале. **Premultiply**, где информация о прозрачности хранится в alpha-канале и в видимом RGB цветовом диапазоне, который в том числе накладываются на цвет фона.|
>>|`Low Latency`|Включение режима минимальной задержки при обработке данных через сетевое соединение.|
>>|`Group ID`|Включение режима синхроннной работы (запуска и остановки) между **Bmd Fill/Key Output**. Синхронная работа задействуется в том случае, когда параметр `Group ID` равен между собой и **больше 0**.|
>>
>>Раздел **"Output"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Name`|Ввод имени модуля, отображаемого в **Carrot Flowchart**.|
>>
>>Раздел **"Прочее"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Output Type`|Отображение информации о модуле вывода. Нередактируемый параметр.|
>
>`Bmd Output`
>
>>Раздел **"DeckLink"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Output Device`|Выбор карты видеозахвата **BMD** из списка подключенных для взаимодействия с **Carrot**.|
>>|`Output Mode`|Выбор формата вывода видео-сигнала.|
>>|`Delay`|Указание задержки выходного видео-сигнала карты захвата **BMD**.|
>>|`Group ID`|Включение режима синхроннной работы (запуска и остановки) между **Bmd Output**. Синхронная работа задействуется в том случае, когда параметр `Group ID` равен между собой и **больше 0**.|
>>
>>Раздел **"Output"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Name`|Ввод имени модуля, отображаемого в **Carrot Flowchart**.|
>>
>>Раздел **"Preview"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Width`|Указание ширины обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>|`Height`|Указание высоты обрабатываемого видео-сигнала. Измеряется в "пиксель".|
>>
>>Раздел **"Прочее"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Output Type`|Отображение информации о модуле вывода. Нередактируемый параметр.|
>
>`Screen Output`
>
>>Раздел **"Output"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Name`|Ввод имени модуля, отображаемого в **Carrot Flowchart**.|
>>
>>Раздел **"Прочее"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Output Type`|Отображение информации о модуле вывода. Нередактируемый параметр.|
>>|`Width`|Указание ширины отображаемого видео-сигнала. Измеряется в "пиксель".|
>>|`Height`|Указание высоты отображаемого видео-сигнала. Измеряется в "пиксель".|
>>|`VSync`|Включение режима вертикальной синхронизации.|
>
>`WebSocket Stream Output`
>
>>Раздел **"Output"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Name`|Ввод имени модуля, отображаемого в **Carrot Flowchart**.|
>>
>>Раздел **"Secure Connection"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Certificate`|Указание директории (пути) к файлу сертификата формата **.pfx**. Применяется при использовании защифрованного соединения.|
>>|`Certificate Password`|Ввод пароля к сертификату зашифрованного соединения.|
>>|`Secure Connection`|Включение режима зашифрованного соединения.|
>>
>>Раздел **"Stream"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Width`|Указание ширины отображаемого видео-сигнала. Измеряется в "пиксель".|
>>|`Height`|Указание высоты отображаемого видео-сигнала. Измеряется в "пиксель".|
>>|`FPS`|Указание количества обрабатываемых кадров в секунду.|
>>|`Bitrate`|Указание скорости передачи видео-сигнала.|
>>|`MaxBitrate`|Указание максимальной скорости передачи видео-сигнала.|
>>|`Process Audio`|Включение режима вывода аудио-сигнала.|
>>|`Stream Port`|Указание номера порта **WebSocket Stream Output** другого движка (на который предполагается передача сигнала).|
>>|`Stream Host`|Указание IP-адреса рабочей станции принимающей видео-сигнал.|
>>|`Codec Type`|Выбор способа обработки видео-сигнала (кодека).|
>>|`Use GPU Encoder`|Включение режима использования **Decoder'a** графического процессора. При выключенном функционале, задействуется **3D**. Рекомендуется использовать при работе с **4K** изображением.|
>
>`Stream Output`
>
>>Раздел **"Output"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Name`|Ввод имени модуля, отображаемого в **Carrot Flowchart**.|
>>|`Width`|Указание ширины отображаемого видео-сигнала. Измеряется в "пиксель".|
>>|`Height`|Указание высоты отображаемого видео-сигнала. Измеряется в "пиксель".|
>>|`FPS`|Указание количества обрабатываемых кадров в секунду.|
>>|`Bitrate`|Указание скорости передачи видео-сигнала.|
>>|`MaxBitrate`|Указание максимальной скорости передачи видео-сигнала.|
>>|`URL`|Указание адреса устройства для передачи видео-сигнала.|
>>
>>Раздел **"Прочее"**
>>
>>|Наименование параметра|Назначение|
>>|-------------------|----------|
>>|`Output Type`|Отображение информации о модуле вывода. Нередактируемый параметр.|

|                                         |                                                                                |
| --------------------------------------- | ------------------------------------------------------------------------------ |
| Область **"Справочная информация"** (4) | Отображение сведений о назначении параметров модулей **Inputs** и **Outputs**. |



#### Кнопка `Help`

![L Help Button](..\images\1.1.5\Launcher\L%20Help%20Button.png)

При взаимодействии с кнопкой `Help` отображается функциональный элемент `About...`, открывающий окно **"About Carrot Launcher"** содержащее сведения о текущей версии приложения **Launcher**.

![L About Window](..\images\1.1.5\Launcher\L%20About%20Window.png)

## System Monitor

### Назначение

**System Monitor** предназначен для создания **схем Carrot Engine** и привязки их к рабочим станциям, создания пользователей и пользовательских групп с определёнными правами (ролями), запуска рабочих станций, настройки каналов, а также отображения настроек Keyer.

>Перед началом работы с **System Monitor** необходимо запустить приложения **Carrot Server** и **Launcher**.


### Описание пользовательского интерфейса

![SM Main Window](..\images\1.1.5\System%20Monitor\SM%20Main%20Window.png)

Пользовательский интерфейс приложения **System Monitor** состоит из следующих областей:
- **"Вспомогательные кнопки взаимодействия с System Monitor"** (1);
- **"Основные вкладки System Monitor"** (2).

#### Область "Вспомогательные кнопки взаимодействия с System Monitor"

![SM Buttons](..\images\1.1.5\System%20Monitor\SM%20Buttons.png)

Область **"Вспомогательные кнопки взаимодействия с Carrot Server"** включает в себя следующие кнопки:
- `File` (1);
- `Help` (2).

##### Кнопка `File`

![SM File Button](..\images\1.1.5\System%20Monitor\SM%20File%20Button.png)

При взаимодействии с кнопкой `File` отображаются два функциональных элемента, назначение которых представлено в таблице ниже.

| Наименование функционального элемента | Назначение                                                                | Сочетание клавиш |
| ------------------------------------- | ------------------------------------------------------------------------- | ---------------- |
| `Settings`                            | Открытие окна **"Settings"** для настройки параметров **System Monitor**. | `F4`             |
| `Exit`                                | Завершение работы **System Monitor**.                                     | `Alt + F4`       |

###### Функциональный элемент `Settings`

После взаимодействия с функциональным элементом `Settings` откроется окно **"Settings"**, предназначенное для настроек параметров **Carrot Server**.

![SM Settings](..\images\1.1.5\System%20Monitor\SM%20Settings.png)

Настраиваемые параметры **Carrot Server** распределены по разделы, перечень и назначение которых изложены в таблицах ниже.

**Раздел** `Licence`

| Наименование параметра | Назначение                       |
| ---------------------- | -------------------------------- |
| `Licence Key`          | Ввод лицензионного ключа Carrot. |

**Раздел** `Network`

| Наименование параметра | Назначение                                                                     |
| ---------------------- | ------------------------------------------------------------------------------ |
| `Server Host List`     | Ввод IP-адреса рабочей станции для подключения к её базе данных.               |
| `Secure`               | Включение (True)/отключение (False) режима защищённого информационного обмена. |

**Раздел** `UI`

| Наименование параметра | Назначение                        |
|------------------------|-----------------------------------|
| `Server Host List`     | Ввод IP-адреса рабочей станции (Workstation) для подключения к её базе данных.|

**Раздел** `User`

| Наименование параметра | Назначение                                                                |
| ---------------------- | ------------------------------------------------------------------------- |
| `Auto Logon`           | Включение (True)/отключение (False) режима автоматической аутентификации. |
| `User Name`            | Изменение идентификатора (логина) пользователя.                           |
| `Password`             | Изменения пароля пользователя.                                            |

###### Функциональный элемент `Exit`

После взаимодействия с функциональным элементом `Exit` завершается работа и закрывается окно приложения **System Monitor**.

##### Кнопка `Help`

![SM Help Button](..\images\1.1.5\System%20Monitor\SM%20Help%20Button.png)

При взаимодействии с кнопкой `Help` отображается функциональный элемент `About...`, открывающий окно **"About Carrot System Monitor"** содержащее сведения о текущей версии приложения **System Monitor**.

![SM About Window](..\images\1.1.5\System%20Monitor\SM%20About%20Window.png)


#### Область "Основные вкладки System Monitor"

![SM FW Area](..\images\1.1.5\System%20Monitor\SM%20FW%20Area.png)


Область **"Основные вкладки System Monitor"** включает в себя функциональные окна, назначение которых представлено в таблице ниже.

| Порядковый номер | Наименование окна | Назначение                                                                                                              |
| ---------------- | ----------------- | ----------------------------------------------------------------------------------------------------------------------- |
| 1                | Workstations      | Создание папок хранения рабочих станций (Workstations) в базе данных и привязка схем Carrot Engine к ним.               |
| 2                | Engines           | Создание и редактирование схем Carrot Engine, папок их хранения, а также привязка рабочих станций (Workstations).       |
| 3                | Users & Groups    | Создание пользователей и пользовательских групп, в том числе назначение прав (ролей).                                   |
| 4                | Launcher          | Запуск рабочих станциях (Workstations) с привязанными схемами Carrot Engine.                                            |
| 5                | Keyer settings    | Отображение используемых настроек нод "Keyer" в схемах Carrot Engine.                                                   |
| 6                | Channels          | Создание каналов для разграничения пользователей по правам взаимодействия с плейлистом Web Playlist (Carrot Dashboard). |

##### Функциональное окно "Workstations"

![SM FW Workstations](..\images\1.1.5\System%20Monitor\SM%20FW%20Workstations.png)

Функциональное окно **"Workstations"** состоит из следующих областей:
- **"Рабочие станции"** (1);
- **"Связанные схемы Carrot Enginе"** (2).

###### Область "Рабочие станции"

![SM FW W Workstations Area](..\images\1.1.5\System%20Monitor\SM%20FW%20W%20Workstations%20Area.png)

Область **"Рабочие станции"** предназначена для отображения списка зарегистрированных рабочих станций разграниченным по папкам хранения.

>Регистрация рабочих станций осуществляется в приложении **Launcher**.

![SM FW W Workstations Elements](..\images\1.1.5\System%20Monitor\SM%20FW%20W%20Workstations%20Elements.png)

Область **"Рабочие станции"** включает в себя следующие элементы, представленные в таблице ниже.

| Наименование элемента   | Назначение                                                                         |
| ----------------------- | ---------------------------------------------------------------------------------- |
| Кнопка `Add Folder` (1) | Открытие окна создания папок для разграничения зарегистрированных рабочих станций. |

>Внешний вид окна создания папок после взаимодействия с кнопкой `Add Folder` представлен на рисунке ниже.
>
>![SM Enter folder name Window](..\images\1.1.5\System%20Monitor\SM%20Enter%20folder%20name%20Window.png)
>Для создания папки, необходимо в поле **"Enter folder name"** ввести требуемое наименование и нажать кнопку `OK`. 
>
>Для прерывания процесса создания папки, необходимо нажать кнопку `Cancel`.


|                                                 |                                                                                                                         |
| ----------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| Перечень зарегистрированных рабочих станций (2) | Отображение списка содержащего сведения о зарегистрированных рабочих станциях разграниченных по соответствующим папкам. |


###### Область "Связанные схемы Carrot Enginе"

![SM FW W RS Carrot Engine Area](..\images\1.1.5\System%20Monitor\SM%20FW%20W%20RS%20Carrot%20Engine%20Area.png)

Область **"Связанные схемы Carrot Enginе"** предназначена для отображения перечня доступных для запуска на рабочей станции схем **Carrot Engine**.

>Для получения доступа к области **"Связанные схемы Carrot Enginе"**, необходимо выбрать зарегистрированную рабочую станцию (Workstation).

![SM FW W RS Carrot Engine Elements](..\images\1.1.5\System%20Monitor\SM%20FW%20W%20RS%20Carrot%20Engine%20Elements.png)

Область **"Связанные схемы Carrot Enginе"** включает в себя следующие элементы, представленные в таблице ниже.

| Наименование элемента               | Назначение                                                                                                                        |
| ----------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| Поле **"Name"** (1)                 | Отображение наименования выбранной рабочей станции.                                                                               |
| Перечень схем **Carrot Engine** (2) | Отображение списка содержащего сведения о связанных с рабочей станцией схем **Carrot Engine**.                                    |
| Кнопка `Clear Cache` (3)            | Удаление загруженной (используемой) в приложении **Carrot Engine** информации из папок **AdditionalAssets** и **OriginalAssets**. |

>По умолчанию, папки **AdditionalAssets** и **OriginalAssets** располагаются по следующей директории (пути):
>
>`C:\Users\Имя_Пользователя\AppData\Local\Carrot`
>
>Рекомендуется своевременно удалять накапливаемую информацию с помощью кнопки `Clear Cache` из папок **AdditionalAssets** и **OriginalAssets** во избежание случаев переполнения накопителей информации рабочей станции.


##### Функциональное окно "Engines"

![SM FW Engine](..\images\1.1.5\System%20Monitor\SM%20FW%20Engines.png)

Функциональное окно **"Engines"** состоит из следующих областей:
- **"Cхемы Carrot Engine"** (1);
- **"Связанные рабочие станции"** (2).

###### Область "Схемы Carrot Engine"

![SM FW E S Carrot Engine Area](..\images\1.1.5\System%20Monitor\SM%20FW%20E%20S%20Carrot%20Engine%20Area.png)

Область **"Схемы Carrot Engine"** предназначена для отображения, создания и редактирования списка схем **Carrot Engine**, в том числе их разграничения по папкам хранения.

![SM FW E S Carrot Engine Elements](..\images\1.1.5\System%20Monitor\SM%20FW%20E%20S%20Carrot%20Engine%20Elements.png)

Область **"Схемы Carrot Engine"** включает в себя следующие элементы, представленные в таблице ниже.

| Наименование элемента   | Назначение                                                                       |
| ----------------------- | -------------------------------------------------------------------------------- |
| Кнопка `Add Folder` (1) | Открытие окна создания папок для разграничения созданных схем **Carrot Engine**. |

>Внешний вид окна создания папок после взаимодействия с кнопкой `Add Folder` представлен на рисунке ниже.
>
>![SM Enter folder name Window](..\images\1.1.5\System%20Monitor\SM%20Enter%20folder%20name%20Window.png)
>Для создания папки, необходимо в поле **"Enter folder name"** ввести требуемое наименование и нажать кнопку `OK`. 
>
>Для прерывания процесса создания папки, необходимо нажать кнопку `Cancel`.

|                         |                                                |
| ----------------------- | ---------------------------------------------- |
| Кнопка `Add Engine` (2) | Открытие окна создания схем **Carrot Engine**. |

>Создание схем **Carrot Engine** возможно исключительно в папках. При первичной инициализации **Carrot** создаётся папка с наименованием **"Engines".**
>
>Внешний вид окна создания схем **Carrot Engine** после взаимодействия с кнопкой `Add Folder` представлен на рисунке ниже.
>
>![SM Enter engine name Window](..\images\1.1.5\System%20Monitor\SM%20Enter%20engine%20name%20Window.png)
>Для создания схемы **Carrot Engine**, необходимо в поле **"Enter engine name"** ввести требуемое наименование и нажать кнопку `OK`. 
>
>Для прерывания процесса создания папки, необходимо нажать кнопку `Cancel`.


|                          |                                                                                                                    |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------ |
| Кнопка `Edit Scheme` (3) | Редактирование выбранной схемы **Carrot Engine** в системе визуальной обработки видеосигнала **Engine FlowChart**. |

>Описание пользовательского интерфейса системы визуальной обработки видеосигнала **Engine Flowchart** представлено в соответствующем [разделе](Carrot Basics.md).

|                                               |                                                                                                                   |
| --------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- |
| Перечень созданных схем **Carrot Engine** (4) | Отображение списка содержащего сведения о созданных схемах **Carrot Engine** с разграничением по папкам хранения. |

>В случае, если созданная схема **Carrot Engine** не отображается в папке, необходимо переключиться между функциональными окнами **System Monitor** для обновления содержимого функционального окна **"Engines"**.

###### Область "Связанные рабочие станции"

![SM FW E RW Area](..\images\1.1.5\System%20Monitor\SM%20FW%20E%20RW%20Area.png)

Область **"Связанные рабочие станции"** предназначена для добавления выбранной схеме **Carrot Engine** рабочих станций, с целью дальнейшего воспроизведения на них обработанного видеосигнала.

![SM FW E RW Elements](..\images\1.1.5\System%20Monitor\SM%20FW%20E%20RW%20Elements.png)

Область **"Связанные рабочие станции"** включает в себя следующие элементы, представленные в таблице ниже.

| Наименование элемента      | Назначение                                                                       |
| -------------------------- | -------------------------------------------------------------------------------- |
| Поле **"Engine ID"** (1)   | Отображение уникального идентификатора (ID) выбранной схемы **Carrot Engine**.   |
| Поле **"External ID"** (2) | Ввод внешнего уникального идентификатора (ID) выбранной схемы **Carrot Engine**. |

>Внешний уникальный идентификатор используется при формировании специальных ивентов.

|                              |                                                                                                                   |
| ---------------------------- | ----------------------------------------------------------------------------------------------------------------- |
| Поле **"Name"** (3)          | Отображение и редактирование наименования выбранной схемы **Carrot Engine**.                                      |
| Кнопка `Add Workstation` (4) | Добавление зарегистрированных рабочих станций в область **"Workstations"** для выбранной схемы **Carrot Engine**. |

>После взаимодействия с кнопкой `Add Workstation` открывается окно **"Workstations"** с перечнем зарегистрированных рабочих станций.
>
>Внешний вид окна **"Workstations"** представлен на рисунке ниже.
>
>![SM Workstations Window](..\images\1.1.5\System%20Monitor\SM%20Workstations%20Window.png)
>


|                                |                                                                                    |
| ------------------------------ | ---------------------------------------------------------------------------------- |
| Область **"Workstations"** (5) | Отображение списка связанных рабочих станций с выбранной схемой **Carrot Engine**. |


###### Описание пользовательского интерфейса "Engine Flowchart"

![SM EF](..\images\1.1.5\System%20Monitor\SM%20EF.png)

**"Engine Flowchart"** доступна после взаимодействия с кнопкой `Edit Scheme` располагаемой в области **"Схемы Carrot Engine"** и включает в себя следующие элементы, представленные в таблице ниже.

| Наименование элемента                              | Назначение                                                                 |
| -------------------------------------------------- | -------------------------------------------------------------------------- |
| Область **"Наименование схемы Carrot Engine"** (1) | Отображение сведений о наименовании редактируемой схемы **Carrot Engine**. |
| Область **"Registred inputs"** (2)                 | Отображение перечня зарегистрированных для рабочей станции **"input"**.    |

> Перечень доступных для регистрации **"input"** изложен в соответствующем [разделе](https://carrotsoftware.github.io/docs/0000/#/Launcher?id=_2-%d0%a0%d0%b0%d0%b7%d0%b4%d0%b5%d0%bb-tools).

|                                     |                                                                          |
| ----------------------------------- | ------------------------------------------------------------------------ |
| Область **"Registred outputs"** (3) | Отображение перечня зарегистрированных для рабочей станции **"output"**. |

> Перечень доступных для регистрации **"output"** изложен в соответствующем [разделе](https://carrotsoftware.github.io/docs/0000/#/Launcher?id=_2-%d0%a0%d0%b0%d0%b7%d0%b4%d0%b5%d0%bb-tools).

|                             |                                  |
| --------------------------- | -------------------------------- |
| Область **"Flowchart"** (4) | Создание схем **Carrot Engine**. |

>Создание схем **Carrot Engine** представляет из себя процесс добавления **"input"**, **"output"**, **"нод обработки видеосигнала"** и построения взаимосвязей между ними.
>
> Минимальный перечень нод при создании схемы **Carrot Engine** должен включать в себя **"нода обработки видеосигнала"** и **"output"**.
>
>При проектировке схем **Carrot Engine**, стоит учитывать, что входной сигнал (реализуемый с помощью **"input"**) должен быть связан с **"нодой обработки видеосигнала"**.

|                              |                                  |
| ---------------------------- | -------------------------------- |
| Область **"Properties"** (5) | Отображение свойств (параметров) выбранной ноды.                                 |

>**"input"** и **"output"** содержат свойство (параметр) `Name`, отображающее сведения о присвоенных им наименовании.
>
>>Редактирование свойства (параметра) `Name` возможно при первоначальной регистрации **"input"** и **"output"** рабочей станции в приложении **Launcher**.
>
>**"Ноды обработки видеосигнала"** содержат следующие редактируемые свойства (параметры) представленные в таблице ниже
>
>>Раздел **"Common"**
>>
>>| Наименование свойства (параметра) ноды обработки видеосигнала | Назначение |
>>|----------------------|-|
>>|`Name`|Отображение и редактирование наименования ноды обработки видеосигнала.|
>>|`Created`|Отображение даты создания ноды обработки видеосигнала.|
>>|`Changed`|Отображение даты последнего изменения ноды обработки видеосигнала.|
>>
>>Раздел **"Audio Capture"**
>>
>>| Наименование свойства (параметра) ноды обработки видеосигнала | Назначение |
>>|----------------------|-|
>>|`ContentType`|Отображение типа ноды обработки видеосигнала.|
>>|`Width`|Указание ширины отображаемой мультимедийной информации.|
>>|`Height`|Указание высоты отображаемой мультимедийной информации.|
>>|`Preset`|Выбор стандартного разрешения для отображения мультимедийной информации, в том числе отображение разрешения, указанного в свойствах (параметрах) `Width` и `Height`.|
>>|`EngineName`|Отображение наименования схемы Carrot Engine, в которой используется выбранная нода обработки видеосигнала.|
>>
>>Нода обработки видеосигнала `Viewport` включает в себя возможность редактирования свойства (параметра) `Alpha Mode`, предназначенного для выбора способа обработки альфа-канала обрабатываемого видеосигнала. Свойство (параметр) `Alpha Mode` содержит следующие способы обработки видеосигнала:
>>
>>- `Default` - не обрабатывается альфа-канал принимаемого видеосигнала (параметр выключен);
>>- `Keep source alpha` - обработка альфа-канала принимамого видеосигнала у первой (по счёту сверху вниз) точки входа ноды;
>>- `Keep distance alpha` - обработка альфа-канала принимамого видеосигнала у последней (по счёту сверху вниз) точки входа ноды.

|                              |                                  |
| ---------------------------- | -------------------------------- |
| Кнопка `Save` (6)            | Сохранение созданной и изменённой схемы **Carrot Engine**                              |


**"Ноды обработки видеосигнала"** доступны при нажатии `правой кнопкой мыши (ПКМ)` в свободном пространстве области **"Flowchart"**, внешний вид которых представлен на рисунке ниже.

![SM EF Nodes](..\images\1.1.5\System%20Monitor\SM%20EF%20Nodes.png)

Назначение **"нод обработки видеосигнала"** изложено в таблице ниже.

|Порядковый номер| Наименование ноды обработки видеосигнала | Назначение |
|------------------|----------------------|-|
|1|`Container`|Сохранение экспортируемого шаблона **After Effects** или **Unreal Engine**.|

>**"Нода обработки видеосигнала"** `Container` позволяет сохранять (экспортировать) только один шаблон. 
>
>При формировании **схем Carrot Engine** включающих в себя использование **"ноды обработки видеосигнала"** `Container` необходимо учитывать, что свою работу она осуществляет непосредственно с объектом (например текстурой) который изначально был инициализирован (запущен ивент в **Web-Playlist (Carrot Dashboard)**). Таким образом, в случае изменения **"нодами обработки видеосигнала"** инициализированного объекта на другой, запущенная **схема Carrot Engine** будет некорректно функционировать. 
>
>В связи с чем, в случае наблюдения некорректного функционирования **схемы Carrot Engine** при работе с сохранённым шаблоном, рекомендуется перезагрузить ивент (используя последовательно кнопки `Unload` и `Load`) в **Web-Playlist (Carrot Dashboard)** или использовать в **схеме Carrot Engine** **"ноду обработки видеосигнала"** `Viewport` в соответствии с рисунком ниже
>
>![SM_EF_Container_Node](..\images\1.1.6\Carrot%20Basics\System%20Monitor\SM_EF_Container_Node.png)

| | | |
|------------------|----------------------|-|
|2|`Viewport`|Объединение нескольких видеосигналов в один.|

>**"Нода обработки видеосигнала"** `Viewport` включает в себя функциональную возможность обработки одного видеосигнала.

|     |         |                                                                                                           |
| --- | ------- | --------------------------------------------------------------------------------------------------------- |
| 3   | `Keyer` | Выполнение функций "Кеера" (выделение цвета аддитивной модели RGB, в том числе его замена на видеосигнал) |
| 4   | `AR`    | Наложение подготовленных шаблонов After Effects и Unreal Engine.                                          |

>Нода обработки видеосигнала `AR` содержит точки входа **Background** и **Foreground**.
>Точка входа **Background** предназначена для приёма сигнала с видеокамеры.
>Точка входа **Foreground** предназначена для приёма видеосигнала, содержащего подготовленные графические шаблоны. 

|     |        |                                                                                |
| --- | ------ | ------------------------------------------------------------------------------ |
| 5   | `Luma` | Наложение видеосигнала с выделенной областью (маской) на основной видеосигнал. |
| 6   | `Blur` | Наложение графического эффекта **"размытие"** на видеосигнал                   |

>Применение графического эффекта **"Размытие"** на видеосигнал осуществляется с использованием MIP-текстурирования.
>
>Настройки ноды `Blur` доступны (при её использовании в схеме Carrot Engine) в разделе **Contents Settings** вкладки **Tools** приложения **Carrot Engine**

|     |                         |                                                                                                     |
| --- | ----------------------- | --------------------------------------------------------------------------------------------------- |
| 7   | `Distortion`            | Искажение видеосигнала путём добавления (имитации) эффекта линзы видеокамеры.                       |
| 8   | `Undistorted UE Source` | Искажение видеосигнала шаблона Unreal Engine путём добавления (имитации) эффекта линзы видеокамеры. |

>При отсутствии настроек у **"ноды обработки видеосигнала"** `Undistorted UE Source`, выходной видеосигнал отображается без искажений.

| | | |
|------------------|----------------------|-|
|9|`Undistort`|Обработка (выравнивание) видеосигнала от искажений линзы видеокамеры.|
|10|`Resize`|Масштабирование видеосигнала.|
|11|`Image Tracker`|Перемещение объекта (видеосигнала) в обозначенной области, в том числе отображение сведений о нём.|

>**"Ноды обработки видеосигнала"** содержат неограниченное количество точек входа для подключений.


##### Функциональное окно "Users & Groups"

![SM FW UserGroups](..\images\1.1.5\System%20Monitor\SM%20FW%20UserGroups.png)

Функциональное окно **"Users & Groups"** состоит из следующих областей:
- **"Пользовательские группы (Groups)"** (1);
- **"Предоставляемые права (роли) (Role)"** (2);
- **"Пользователи (Users)"** (3);
- **"Пользовательские данные"** (4).

###### Область "Пользовательские группы (Groups)"

![SM FW UG Groups Area](..\images\1.1.5\System%20Monitor\SM%20FW%20UG%20Groups%20Area.png)

Область **"Пользовательские группы (Groups)"** предназначена для создания **пользовательских групп**. **Пользовательская группа** позволяет осуществлять регистрацию (добавление) пользователей, а также производить настройку их прав (ролей) доступа к функциональным возможностям **Carrot**.

![SM FW UG Groups Elements](..\images\1.1.5\System%20Monitor\SM%20FW%20UG%20Groups%20Elements.png)

Область **"Пользовательские группы (Groups)"** состоит из следующих элементов, представленных в таблице ниже.

| Наименование элемента  | Назначение                                         |
| ---------------------- | -------------------------------------------------- |
| Кнопка `Add Group` (1) | Открытие окна создания **пользовательских групп**. |

>Внешний вид окна создания **пользовательских групп** после взаимодействия с кнопкой `Add Group` представлен на рисунке ниже.
>
>![SM Enter user group name Window](..\images\1.1.5\System%20Monitor\SM%20Enter%20user%20group%20name%20Window.png)
>Для создания **пользовательской группы**, необходимо в поле **"Enter user group name"** ввести требуемое наименование и нажать кнопку `OK`. 
>
>Для прерывания процесса создания **пользовательской группы**, необходимо нажать кнопку `Cancel`.


|                          |                                                           |
| ------------------------ | --------------------------------------------------------- |
| Область **"Groups"** (1) | Отображения списка созданных **пользовательских групп** . |


###### Область "Предоставляемые права (роли) (Role)"

![SM FW UG Role Area](..\images\1.1.5\System%20Monitor\SM%20FW%20UG%20Role%20Area.png)

**Область "Предоставляемые права (роли) (Role)"** предназначена для указания прав (ролей) выбранной пользовательской группе.

![SM FW UG Role Elements](..\images\1.1.5\System%20Monitor\SM%20FW%20UG%20Role%20Elements.png)

Область **"Предоставляемые права (роли) (Role)"** состоит из следующих элементов, представленных в таблице ниже.

| Наименование элемента  | Назначение                                                                                  |
| ---------------------- | ------------------------------------------------------------------------------------------- |
| Поле **"Name"** (1)    | Отображение и редактирование сведений о наименовании выбранной **пользовательской группы**. |
| Область **"Role"** (2) | Выбор прав (ролей) для пользовательской группы.                                             |

>Перечень доступных доступных прав (ролей) представлен в таблице ниже.
>
>| Наименование права (роли) | Назначение |
>|----------------------|-|
>|`SystemEdit`|Возможность взаимодействия с пользователями, пользовательскими группами и каналами в приложении **System Monitor**.|
>
>>Функционирование права (роли) `SystemEdit` осуществляется совместно с ролью `SystemView`.
>
>|||
>|-|-|
>|`PlaylistEditor`|Возможность редактирования плейлистов в **Web Playlist (Carrot Dashboard)**.|
> 
>>Функционирование права (роли) `PlaylistEditor` осуществляется совместно с ролью `PlaylistView`.
>
>|||
>|-|-|
>|`TemplateEdit`|Возможность редактирования шаблона **After Effects** в приложении **Template Preview**.|
>
>>Функционирование права (роли) `TemplateEdit` осуществляется совместно с ролью `TemplateView`.
>
>|||
>|-|-|
>|`SystemView`|Возможность просмотра созданных пользователей, пользовательских групп и каналов в приложении **System Monitor**.|
>|`PlaylistView`|Возможность просмотра содержимого плейлистов в **Web Playlist (Carrot Dashboard)**.|
>|`TemplateView`|Возможность просмотра просмотра содержимого шаблона After Effects в приложении **Template Preview**.|
>|`GlobalVarEdit`|Возможность редактирования глобальных переменных ивента плейлиста в **Web Playlist (Carrot Dashboard)**, формируемых при создании шаблона, а также ячеек приложения **DataStream Server**.|
>|`PlaylistTaker`|Возможность воспроизведения подготовленной графики (ивенты, шаблоны) в плейлисте **Web Playlist (Carrot Dashboard)**.|


###### Область "Пользователи (Users)"

![SM FW UG Users Area](..\images\1.1.5\System%20Monitor\SM%20FW%20UG%20Users%20Area.png)

**Область "Пользователи (Users)"** предназначена для создания пользовательских аккаунтов в выбранной пользовательской группе.

>Перечень предоставляемых пользователю прав (ролей) определяется пользовательской группой, в которую он был добавлен.

![SM FW UG Users Elements](..\images\1.1.5\System%20Monitor\SM%20FW%20UG%20Users%20Elements.png)

Область **"Пользователи (Users)"** состоит из следующих элементов, представленных в таблице ниже.

| Наименование элемента | Назначение                                                                                 |
| --------------------- | ------------------------------------------------------------------------------------------ |
| Кнопка `Add User` (1) | Открытие окна создания **пользовательского аккаунта** в выбранной пользовательской группе. |

>Внешний вид окна создания **пользовательского аккаунта** после взаимодействия с кнопкой `Add User` представлен на рисунке ниже.
>
>![SM Creating new user Window](..\images\1.1.5\System%20Monitor\SM%20Creating%20new%20user%20Window.png)
>Для создания **пользовательского аккаунта** в выбранной пользовательской группе, необходимо заполнить следующие поля:
>- **Enter user name** - ввод наименования пользовательского аккаунта;
>- **Entre login** - ввод идентификатора (логина) пользовательского аккаунта; 
>- **Enter password** - ввод пароля пользовательского аккаунта.
>
>Для сохранения регистрационных данных **пользовательского аккаунта**, необходимо нажать кнопку `OK`. Чтобы прервать процесс создания **пользовательского аккаунта**, необходимо нажать кнопку `Cancel`

|                         |                                                                                            |
| ----------------------- | ------------------------------------------------------------------------------------------ |
| Область **"Users"** (1) | Отображения списка созданных пользовательских аккаунтов выбранной пользовательской группы. |


>Количество создаваемых пользователей не ограничено.
>
>Для удаления выбранного **пользовательского аккаунта** необходимо воспользоваться клавишей `Delete` на клавиатуре и в открывшемся окне **Delete User** подтвердить действие путём взаимодействия с кнопкой `Да`.



###### Область "Пользовательские данные"

![SM FW UG User Data Area](..\images\1.1.5\System%20Monitor\SM%20FW%20UG%20User%20Data%20Area.png)

Область **"Пользовательские данные"** предназначена для отображения и редактирования регистрационных сведений выбранного пользовательского аккаунта.

![SM FW UG User Data Elements](..\images\1.1.5\System%20Monitor\SM%20FW%20UG%20User%20Data%20Elements.png)

Область **"Пользовательские данные"** состоит из следующих элементов, представленных в таблице ниже.

| Наименование элемента   | Назначение                                                                                   |
| ----------------------- | -------------------------------------------------------------------------------------------- |
| Поле **"Name"** (1)     | Отображение и редактирование сведений о наименовании пользовательского аккаунта.             |
| Поле **"Login"** (2)    | Отображение и редактирование сведений об идентификаторе (логине) пользовательского аккаунта. |
| Поле **"Password"** (3) | Отображение и редактирование сведений о пароле пользовательского аккаунта.                   |

>В случае редактирования сведений пользовательского аккаунта, в области **"Пользовательские данные"** отобразится кнопка `Save`, взаимодействие c которой сохранит введённые изменения.


##### Функциональное окно "Launcher"

![SM FW Launcher](..\images\1.1.5\System%20Monitor\SM%20FW%20Launcher.png)

Функциональное окно **"Launcher"** состоит из следующих областей:
- **"Схемы Carrot Engine"** (1);
- **"Рабочие станции (Workstations)"** (2).

###### Область "Схемы Carrot Engine"

![SM FW L S Carrot Engine Area](..\images\1.1.5\System%20Monitor\SM%20FW%20L%20S%20Carrot%20Engine%20Area.png)

Область **"Схемы Carrot Engine"** предназначена для отображения разграниченного по папкам перечня созданных схем **Carrot Enginе**, подготовленных для дальнейшего их воспроизведения на **рабочей станции**.

>По умолчанию, создаваемые схемы **Carrot Engine** сохраняются в папку с наименованием **Engines**.

###### Область "Рабочие станции (Workstations)"

![SM FW L Workstation Area](..\images\1.1.5\System%20Monitor\SM%20FW%20L%20Workstation%20Area.png)

Область **"Рабочие станции (Workstations)"** предназначена для запуска связанных рабочих станций со схемой **Carrot Engine**.

![SM FW L Workstations Elements](..\images\1.1.5\System%20Monitor\SM%20FW%20L%20Workstations%20Elements.png)

Область **"Рабочие станции (Workstations)"** состоит из следующих элементов, представленных в таблице ниже.

| Наименование элемента          | Назначение                                                        |
| ------------------------------ | ----------------------------------------------------------------- |
| Область **"Workstations"** (1) | Отображение перечня подготовленных к запуску **рабочих станций**. |

>Для запуска подготовленных **рабочих станций** следует обращать внимание на их световую индикацию. Световая индикация **рабочих станций** включает в себя отображение следующих состояний:
>
> <span style="color:gray">Серый</span> - **рабочая станция** не подготовлена к запуску;
>
> <span style="color:yellow">Жёлтый</span> - **рабочая станция** подготовлена и ожидает запуска;
>
> <span style="color:green">Зелёный</span> - **рабочая станция** запущена.
>
>![SM FW L Running Workstation](..\images\1.1.5\System%20Monitor\SM%20SFW%20L%20Running%20Workstation.png)
>
>При запуске **рабочей станции** отображается общая производительность используемая **Carrot Engine** при обработке видеосигнала, перечень которой представлен в таблице ниже.
>
>| Наименование  | Назначение |
>|----------------------|-|
>|`FPS`|Количество кадров в единицу времени.|
>|`VRAM`|Общее использование видеопамяни в процентном соотношении.|
>|`RAM`|Количество используемой Carrot Engine оперативной памяти.|
>|`Output Delay`|Выходная задержка видеосигнала.|
>|`CPU`|Общее использование вычислительных мощностей центрального процессора Carrot Engine в процентном соотношении.|
>|`Input Delay`|Входная задержка видеосигнала.|
>|`Tracking Delay`|Входная задержка по трекингу.|

|                            |                                                                                |
| -------------------------- | ------------------------------------------------------------------------------ |
| Кнопка `Stop` (2)          | Остановка работы рабочей станции в части обработки и отображения видеосигнала. |
| Кнопка `Reset Buffers` (3) | Сброс накопленных задержек выбранной схемы **Carrot Engine**.                  |
| Кнопка `Start` (4)         | Запуск выбранной рабочей станции в части обработки и отображения видеосигнала. |


>Перед запуском **рабочей станции** необходимо убедиться что её световая индикация в состоянии **"Жёлтый"** (Подготовлена и ожидает запуска).
>
>После запуска выбранной **рабочей станции** путём взаимодействия с кнопкой `Start` открывается приложение **Carrot Engine** с обработанный видеосигналом в соответствии со схемой **Carrot Engine**.


##### Функциональное окно "Keyer settings"

![SM FW Keyer settings](..\images\1.1.5\System%20Monitor\SM%20FW%20Keyer%20settings.png)

Функциональное окно **"Keyer settings"** состоит из следующих областей:
- **"Перечень используемых нод Keyer"** (1);
- **"Параметры ноды Keyer"** (2).
###### Область "Перечень используемых нод Keyer"

![SM FW KS Keyer Nodes Area](..\images\1.1.5\System%20Monitor\SM%20FW%20KS%20Keyer%20Nodes%20Area.png)

Область **"Перечень используемых нод Keyer"** предназначена для отображения перечня наименований нод Keyer, задействованных в схемах **Carrot Engine**.

![SM FW KS Keyer Nodes Elements](..\images\1.1.5\System%20Monitor\SM%20FW%20KS%20Keyer%20Nodes%20Elements.png)

Область **"Перечень используемых нод Keyer"** состоит из следующих элементов, представленных в таблице ниже.

| Наименование элемента        | Назначение                                  |
| ---------------------------- | ------------------------------------------- |
| Кнопка `Delete settings` (1) | Удаление настроек выбранной ноды **Keyer**. |

>Кнопка `Delete settings` доступна для взаимодействия при выборе ноды **Keyer**.
>
>Используемые настройки **Keyer** удаляются в том числе и в схемах **Carrot Enigne**.


|                                    |                                                                              |
| ---------------------------------- | ---------------------------------------------------------------------------- |
| Область **"Список нод Keyer"** (2) | Отображение переченя нод **Keyer**, используемых в схемах **Carrot Engine**. |


###### Область "Параметры ноды Keyer"

![SM FW KS Keyer Options Area](..\images\1.1.5\System%20Monitor\SM%20FW%20KS%20Keyer%20Options%20Area.png)

Область **"Параметры ноды Keyer"** предназначена для отображения применяемых настроек к выбранной ноде **Keyer**.


##### Функциональное окно "Channels"

![SM FW Channels](..\images\1.1.5\System%20Monitor\SM%20FW%20Channels.png)

Функциональное окно **"Launcher"** состоит из следующих областей:
- **"Каналы"** (1);
- **"Пользовательские группы"** (2);
- **"Пользователи"** (3).

###### Область "Каналы"

![SM FW C Channels Area](..\images\1.1.5\System%20Monitor\SM%20FW%20C%20Channels%20Area.png)

Область **"Каналы"** предназначена для создания каналов и взаимодействия с ними.

![SM FW C Channels Elements](..\images\1.1.5\System%20Monitor\SM%20FW%20C%20Channels%20Elements.png)

Область **"Перечень используемых нод Keyer"** состоит из следующих элементов, представленных в таблице ниже.

| Наименование элемента       | Назначение                  |
| --------------------------- | --------------------------- |
| Кнопка `Delete Channel` (1) | Удаление выбранного канала. |

>Кнопка `Delete Channel` доступна при выборе одного из созданных каналов

|                          |                                     |
| ------------------------ | ----------------------------------- |
| Кнопка `Add Channel` (2) | Открытие окна создания **каналов**. |

>Внешний вид окна создания **каналов** после взаимодействия с кнопкой `Add Channel` представлен на рисунке ниже.
>
>![SM Enter channel name Window](..\images\1.1.5\System%20Monitor\SM%20Enter%20channel%20name%20Window.png)
>
>Для создания **канала**, необходимо в поле **"Enter channel name"** ввести требуемое наименование и нажать кнопку `OK`. 
>
>Для прерывания процесса создания **канала**, необходимо нажать кнопку `Cancel`.

|                                            |                                           |
| ------------------------------------------ | ----------------------------------------- |
| Область **"Список созданных каналов"** (2) | Отображения списка созданных **каналов**. |


###### Область "Пользовательские группы"

![SM FW C Roles Area](..\images\1.1.5\System%20Monitor\SM%20FW%20C%20Roles%20Area.png)

Область **"Пользовательские группы"** предназначена для отображения списка созданных пользовательских групп.

###### Область "Пользователи"

![SM FW C Users Area](..\images\1.1.5\System%20Monitor\SM%20FW%20C%20Users%20Area.png)

Область **"Пользователи"** предназначена для выбора пользователей из списка выбранной пользовательской группы с целью разграничения прав доступа к объектам **Web Playlist (Carrot Dashboard)**.



## Web Playlist Server

### Назначение

**Web Playlist Server** представляет из себя серверное приложение обеспечивающее централизованный доступ зарегистрированных пользователей к веб-интерфейсу организации и управления контентом **Web Playlist (Carrot Dashboard)**.

>Для формирования **Web Playlist (Carrot Dashboard)** необходимо поочерёдно запустить приложения **Carrot Server** и **Web Playlist Server**.

### Общие сведения

Для получения доступа к **Web Playlist (Carrot Dashboard)** необходимо:

1. Запустить приложение **Web Playlist Server**;

2. Открыть браузер рабочей станции;

>Для корректной работы **Web Playlist (Carrot Dashboard)**, рекомендуется использовать браузер **Google Chrome**.

3. В адресную строку браузера ввести: `IP-address:Port`

>`IP-address` - IP-адрес **рабочей станции**, на которой развёрнут **Web Playlist (Carrot Dashboard)**, в частности приложений поддерживающих его функционал (**Carrot Server** и **Web Playlist Server**).
>
>IP-адрес присваивается индивидуально и указывается в сопроводительной документации.
>
>В случае, если **Web Playlist (Carrot Dashboard)** запущен на локальной **рабочей станции**, возможен ввод значения `localhost` в адресной строке браузера, исключая при этом необходимость поиска или ввода соответствующего **рабочей станции** IP-адреса.
>
>`Port` - порт **рабочей станции** присваиваемый индивидуально (указан в сопроводительной документации). По умолчанию, порту рабочей станции присвоено значение `8088`.

![WP Auth Window](..\images\1.1.5\Web%20Playlist\WP%20Auth%20Window.png)

3. Ввести логин и пароль от учётной записи **Web Playlist (Carrot Dashboard)** и нажать кнопку `Log In`.

### Описание пользовательского интерфейса

Пользовательский интерфейс приложения **Web Playlist Server**, представляет собой консольное приложение, внешний вид которого **(при корректном запуске)** представлен на рисунке ниже.

![WPS Main Window](..\images\1.1.5\Web%20Playlist\WPS%20Main%20Window.png)

Внешний вид пользовательского интерфейса **Web Playlist (Carrot Dashboard)** после успешной авторизации представлен на рисунке ниже.

![WP Main Window](..\images\1.1.5\Web%20Playlist\WP%20Main%20Window.png)

Пользовательский интерфейс **Web Playlist (Carrot Dashboard)** состоит из вкладок, включающих в себя следующие функциональные окна:
- **"Сведения о пользователе"** (1);
- **"Playlist"** (2);
- **"Editor"** (3);
- **"Browser"** (4);
- **"Settings"** (5).

#### Функциональное окно "Сведения о пользователе"

Функциональное окно **"Сведения о пользователе"** предназначено для отображения идентификационных сведений об авторизированном пользователе. Внешний вид функционального окна **"Сведения о пользователе"** представлен на рисунке ниже

![WP User Info Area](..\images\1.1.5\Web%20Playlist\WP%20User%20Info%20Area.png)

![WP User Info Elements](..\images\1.1.5\Web%20Playlist\WP%20User%20Info%20Elements.png)

После взаимодействия с функциональным окном **"Сведения о пользователе"**, раскрывается перечень элементов, доступных для взаимодействия. Назначение элементов функционального окна **"Сведения о пользователе"** представлено в таблице ниже

| Наименование элемента                                   | Назначение                                                                                 |
| ------------------------------------------------------- | ------------------------------------------------------------------------------------------ |
| Область **"Идентификационные данные пользователя"** (1) | Отображение наименования **пользовательского аккаунта** и его пользовательской **группы**. |

>Принадлежность пользователя к одной из **групп** определяет перечень доступных ему функциональных возможностей для взаимодействия с **Web Playlist (Carrot Dashboard)**. Основным примером, реализуемым с помощью пользовательской **группы** является разграничение уровня доступа по выдаче графики в эфир.

|                     |                                               |
| ------------------- | --------------------------------------------- |
| Кнопка `Logout` (2) | Выход из **Web Playlist (Carrot Dashboard)**. |

>При взаимодействии с кнопкой `Logout`, открывается окно **аутентификации пользователя**.

#### Функциональное окно "Playlist"

![WP FW Playlist Elements](..\images\1.1.5\Web%20Playlist\WP%20FW%20Playlist%20Elements.png)

Функциональное окно **"Playlist"** состоит из следующих областей:
- **"Кнопки взаимодействия с ивентами"** (1);
- **"Директория плейлиста"** (2);
- **"Взаимодействие с плейлистом"** (3).

##### Область "Кнопки взаимодействия с ивентами"

![WP FW P Buttons Area](..\images\1.1.5\Web%20Playlist\WP%20FW%20P%20Buttons%20Area.png)

Область **"Кнопки взаимодействия с ивентами"** предназначена для взаимодействия с выбранными ивентами плейлиста с помощью соответствующих кнопок.

![WP FW P Buttons Elements](..\images\1.1.5\Web%20Playlist\WP%20FW%20P%20Buttons%20Elements.png)

Перечень и назначение кнопок области **"Кнопки взаимодействия с ивентами"**, представлены в таблице ниже.

| Наименование кнопки | Назначение                                                           |
| ------------------- | -------------------------------------------------------------------- |
| `Load (1)`          | **Загрузка** выбранного ивента в плейлист.                           |
| `Load all (2)`      | **Загрузка** всех ивентов в плейлист.                                |
| `IN (3)`            | **Воспроизведение** выбранного ивента в плейлисте.                   |
| `Next (4)`          | **Остановка** выбранного ивента и воспроизведение следующего за ним. |
| `OUT (5)`           | **Остановка** выбранного ивента.                                     |
| `Unload (6)`        | **Выгрузка** выбранного ивента из плейлиста.                         |
| `Unload all (7)`    | **Выгрузка** всех ивентов из плейлиста.                              |
| `Panic (8)`         | **Принудительная остановка** запущенных ивентов в плейлисте.         |

##### Область "Директория плейлиста"

![WP FW P Directory Area](..\images\1.1.5\Web%20Playlist\WP%20FW%20P%20Directory%20Area.png)

Область **"Директория плейлиста"** предназначена для отображения сведений о наименовании открытого плейлиста и располагаемой директории (пути). 

![WP FW P Directory Elements](..\images\1.1.5\Web%20Playlist\WP%20FW%20P%20Directory%20Elements.png)

Область **"Директория плейлиста"** состоит из следующих элементов, представленных в таблице ниже.

| Наименование элемента | Назначение                                                                  |
| --------------------- | --------------------------------------------------------------------------- |
| Кнопка `🗁` (1)       | Открытие окна **"Выбор существующего плейлиста (Open existing playlist)"**. |


>Внешний вид окна **"Выбор существующего плейлиста (Open existing playlist)"** после взаимодействия с кнопкой `🗁` представлен на рисунке ниже.
>
>![WP Open existing playlist Window Area](..\images\1.1.5\Web%20Playlist\WP%20Open%20existing%20playlist%20Window%20Area.png)
>![WP Open existing playlist Window Elements](..\images\1.1.5\Web%20Playlist\WP%20Open%20existing%20playlist%20Window%20Elements.png)
> Окно **"Выбор существующего плейлиста (Open existing playlist)"** состоит из следующих элементов:
>
>- поле **"Сортировка"** (1);
>>Сортировка плейлистов возможна по следующим способам:
>>- в порядке возрастания по первой буквы имени плейлиста;
>>- в порядке убывания по первой буквы имени плейлиста;
>>- в порядке возрастания от даты создания плейлиста;
>>- в порядке убывания от даты создания плейлиста.
>- область **"Сведения о плейлисте"** (2);
>- область **"Recent playlist"** (3);
>- поле **"Enter Playlist name"** (4);
>- кнопка `Open` для создания плейлиста (5);
>- кнопка `Cancel` для отмены процедуры создания плейлиста (6).
>
>Для открытия плейлиста, необходимо в области **"Сведения о плейлисте"** или в **"Recent playlist"** выбрать подготовленный и нажать кнопку `Open`.

|                                                         |                                                               |
| ------------------------------------------------------- | ------------------------------------------------------------- |
| Область **"Директория (путь) открытого плейлиста"** (2) | Отображение сведений о директории (пути) открытого плейлиста. |


##### Область "Взаимодействие с плейлистом"

![WP FW P Interaction Area](..\images\1.1.5\Web%20Playlist\WP%20FW%20P%20Interaction%20Area.png)


Область **"Взаимодействие с плейлистом"** предназначена для отображения общей и вспомогательной информации об используемых ивентах в плейлисте. 

![WP FW P Interaction Elements](..\images\1.1.5\Web%20Playlist\WP%20FW%20P%20Interaction%20Elements.png)

Область **"Взаимодействие с плейлистом"** состоит из следующих элементов, представленных в таблице ниже.

| Наименование элемента                         | Назначение                                                          |
| --------------------------------------------- | ------------------------------------------------------------------- |
| Область **"Общая информация об ивентах"** (1) | Отображение основных сведений  об используемых ивентах в плейлисте. |

>![WP FW P GI Events](..\images\1.1.5\Web%20Playlist\WP%20FW%20P%20GI%20Events.png)
>
>
>Область **"Общая информация об ивентах"** может отображать сведения об ивентах, представленные в таблице ниже.
>
>|Тип отображаемой информации|Назначение|
>|-------------------|----------|
>|`Name`|Отображение сведений о **наименовании** ивента.|
>|`Comment`|Отображение справочной информации об ивенте (комментарий).|
>|`Template name`|Отображение сведений о наименовании шаблона в котором используется выбранный ивент.|
>|`Status`|Отображение сведений о **состоянии** **Status** ивента.|
>
>>Каждый ивент может находиться в следующих **состояниях** (**Status**):
>>
>><span style="color:gray">Unloaded</span> - ивент не загружен в плейлист;
>>
>><span style="color:orange">Loading</span> - загрузка ивента в плейлист;
>>
>> <span style="color:purple">Ready</span> - ивент загружен и готов к запуску;
>>
>> <span style="color:green">Active</span> - ивент запущен.
>
>| | |
>|-------------------|----------|
>|`Content`|Отображение имени "контейнера", к которому привязан ивент.|
>|`Id`|Уникальный идентификатор ивента. По умолчанию отображение параметра отключено.|
>|`External Id`|Внешний уникальный идентификатор ивента. По умолчанию отображение параметра отключено.|
>
>>**Внешний уникальный идентификатор ивента** предназначен для поддержки программного взаимодействия между **"playout системами"**.
>
>| | |
>|-------------------|----------|
>|`Current State`|По умолчанию отображение параметра отключено.|


#### Функциональное окно "Editor"

![WP FW Editor](..\images\1.1.5\Web%20Playlist\WP%20FW%20Editor.png)

Функциональное окно **"Editor"** состоит из следующих элементов:
- кнопка `New Playlist` (1);
- кнопка `Open Playlist` (2);
- область **"Доступные плейлисты"** (3).

##### Кнопка "New Playlist"

![WP FW E New Playlist Button](..\images\1.1.5\Web%20Playlist\WP%20FW%20E%20New%20Playlist%20Button.png)

Кнопка `New Playlist` предназначена для создания плейлистов.

После взаимодействия с кнопкой `New Playlist` открывается окно **"Создание пустого плейлиста"** (**"Create an empty playlist"**), внешний вид которого представлен на рисунке ниже.

![WP Create an empty playlist Window Area](..\images\1.1.5\Web%20Playlist\WP%20Create%20an%20empty%20playlist%20Window%20Area.png)


>![WP Create an empty playlist Window Elements](..\images\1.1.5\Web%20Playlist\WP%20Create%20an%20empty%20playlist%20Window%20Elements.png)
>Окно **"Создание пустого плейлиста"** (**"Create an empty playlist"**) состоит из следующих элементов, представленных в таблице ниже.
>
>| Наименование элемента        | Назначение                                  |
>| ---------------------------- | ------------------------------------------- |
>| Кнопка `Sort by` (1) |Выбор способа сортировки доступных плейлистов. |
>> 
>> Сортировка плейлистов возможна следующими способами:
>> - в порядке возрастания по первой букве имени плейлиста;
>> - в порядке убывания по первой букве имени плейлиста;
>> - в порядке возрастания от даты создания плейлиста;
>> - в порядке убывания от даты создания плейлиста.
>
>| | |
>|-------------------|----------|
>| Область **"Доступные плейлисты"** (2) | Отображение сведений о доступных для использования в **Web Playlist (Carrot Dashboard)** плейлистах.|
>| Поле **"Enter Playlist name"** (3) | Ввод наименования создаваемого плейлиста.|
>| Кнопка `OK` (4) | Создание плейлиста.|
>| Кнопка `Cancel` (5) | Прерывание процесса создания плейлиста. |
>
>Для создания плейлиста, необходимо в поле **"Enter Playlist name"** ввести необходимое наименование и нажать кнопку `OK`.


##### Кнопка "Open Playlist"

![WP FW E Open Playlist Button](..\images\1.1.5\Web%20Playlist\WP%20FW%20E%20Open%20Playlist%20Button.png)

Кнопка `Open Playlist` предназначена для открытия созданных (подготовленных) плейлистов.

>После взаимодействия с кнопкой `Open Playlist` отобразится окно **"Выбор существующего плейлиста (Open existing playlist)"**, описание которого изложено разделе **"Область "Директория плейлиста"**.


##### Область "Доступные плейлисты"

![WP FW E Available Playlist Area](..\images\1.1.5\Web%20Playlist\WP%20FW%20E%20Available%20Playlist%20Area.png)

>Для взаимодействия с областью **"Доступные плейлисты"** необходимо создать плейлист (путём взаимодействия с кнопкой `New Playlist`) или открыть уже существующий (путём взаимодействия с кнопкой `Open Playlist`). 

![WP FW E Available Playlist Elements](..\images\1.1.5\Web%20Playlist\WP%20FW%20E%20Available%20Playlist%20Elements.png)

Область **"Доступные плейлисты"*** состоит из следующих элементов:

- область **"Свойства плейлиста"** (1);
- область **"Управление плейлистом"** (2).

###### Область "Свойства плейлиста"

![WP FW E Playlist Stories Elements](..\images\1.1.5\Web%20Playlist\WP%20FW%20E%20Playlist%20Stories%20Elements.png)

Область **"Свойства плейлиста"** состоит из следующих элементов, представленных в таблице ниже.

| Наименование элемента       | Назначение                                       |
| --------------------------- | ------------------------------------------------ |
| Кнопка `Expand stories` (1) | Отображение содержимого **"историй"** плейлиста. |

>**"История"** представляет из себя **папку**, предназначенную для разграничения информации с целью обеспечения удобства работы с ивентами.



|                                        |                                                      |
| -------------------------------------- | ---------------------------------------------------- |
| Кнопка `Collapse stories` (2)          | Скрыть содержимое **"историй"** плейлиста.           |
| Меню **"Функциональные элементы"** (3) | Отображение меню кнопок взаимодействия с плейлистом. |

>После взаимодействия с меню **"Функциональные элементы"** отобразятся кнопки взаимодействия с плейлистом, перечень и назначение которых представлено в таблице ниже.
>
>|Наименование кнопки|Назначение|
>|-------------------|----------|
>|`Add Story`|Создание пустой истории.|
>|`Group Events`|Группировка выбранных ивентов.|
>|`Ungroup Events`|Разгруппировка выбранных ивентов. Появляется в случае выбора уже состоящих в одной группе ивентов.|
>|`Rename Story`|Переименование выбранной истории.|
>|`Remove event(s)`|Удаление выбранного(ых) ивента(ов).|
>|`Remove story`|Удаление выбранной истории.|
>|`Duplicate event(s)`|Дублирование выбранного(ых) ивента(ов).|
>|`Add Special Event`|Добавление специального ивента `Text Command`.|
>>`Text Command` представлет из себя текстовую команду, которая напрямую передаётся в **Carrot Engine**. Список текстовых команд:
>>
>>|Наименование текстовой команды|Назначение|Формат текстовой команды|Пример|
>>|-------------------|----------|----------|----------|
>>|`ApplySettingsToContent`|Применение настроек к контенту типа Keyer (используется в Carrot Flowchart) с помощью заготовленного файла .xml|%Command=[ApplySettingsToContent] %ContentName=[Наименование контента в схеме] %SettingsPath=[Директория файла формата .xml] %SaveSettingsToDB=[True/False]|%Command=[ApplySettingsToContent] %ContentName=[Keyer] %SettingsPath=[D:\KeyerSettings\key_test_14-01-22.xml] %SaveSettingsToDB=[True]|
>>>
>>>В случае, если параметр `SaveSettingsToDB` принимает значение `True`, то настройки сохраняются в базе данных, что позволяет их применять при следующих запусках.
>>>
>>|||||
>>|-------------------|----------|----------|----------|
>>|`RestartContent`|Перезапуск контента "бегущая строка" типа Ticker (используется в Carrot Flowchart).|%Command=[RestartContent] %ContentName=[Наименование контента в схеме]|%Command=[RestartContent] %ContentName=[Ticker]|
>>|`TakeOutContainer`|Вызов `TakeOut` (прекращение работы с анимацией выхода) у шаблонов привязанных к индивидуальному контейнеру (используется в Carrot Flowchart).|%Command=[TakeOutContainer] %ContainerName=[Наименование контейнера в схеме Carrot Flowchart]|%Command=[TakeOutContainer] %ContainerName=[AE_2D]|
>>|`SetGlobalVar`|Изменение глобальной переменной привязанной к шаблону.|%Command=[SetGlobalVar] %GlobalVarName=[Наименование глобальной переменной] %GlobalVarValue=[Изменяемое значение переменной]|%Command=[SetGlobalVar] %GlobalVarName=[title] %GlobalVarValue=[Заголовок]|
>>|`OSC`|Отправка команд по протоколу Open Sound Control.|%Command=[OSC] %Address=[Директория отправки команды] %ArgumentType=[s] %ArgumentValue=[Строковое значение] %ArgumentType=[i] %ArgumentValue=[Целочисленное значение] %ArgumentType=[f] %ArgumentValue=[Вещественное значение]|%Command=[OSC] %Address=[/hog/playback/go/0/72] %ArgumentType=[s] %ArgumentValue=[stroka4] %ArgumentType=[i] %ArgumentValue=[102] %ArgumentType=[f] %ArgumentValue=[104,7]|
>>|`vMix`|Отправка команд по протоколу vMix.|%Command=[vMix] %ArgumentType=[Наименование функции] %ArgumentValue=[Значение параметра] %ArgumentType=[Наименование параметра] %ArgumentValue=[Значение параметра]|%Command=[vMix] %ArgumentType=[Function] %ArgumentValue=[Fade] %ArgumentType=[Duration] %ArgumentValue=[1000]|
>>>
>>>Ознакомиться с перечнем используемых параметров протокола **vMix**, в том числе присваиваемых к ним значениям можно в соответствии с предоставляемой на него [документацией](https://www.vmix.com/help21/index.htm?ShortcutFunctionReference.html).
>>>
>>|||||
>>|-------------------|----------|----------|----------|
>>|`StopPlaylist`|Принудительная остановка проигрываемого плейлиста.|%Command=[StopPlaylist] %Playlists=[Внешний ID плейлиста(ов)]|%Command=[StopPlaylist] %Playlists=[fbd7a92e-cc6e-4eae-b36d-0078ff954260, 1f09f006-7989-4577-b526-6a62da6e8b4e]|
>>>
>>>Функционал работы тектовой команды **StopPlaylist** аналогичен функционалу работы **кнопки "Panic"**, представленной в п. 2.1.
>>>
>>|||||
>>|-------------------|----------|----------|----------|
>>|`Reset`|Перезапуск схем(ы) Carrot Engine по внешнему ID.|%Command=[Reset] %Engines=[Внешний ID схем(ы) Carrot Engine]|%Command=[Reset] %Engines=[Education_1, Education_2]|
>>>
>>>**Внешний ID схемы Carrot Engine** присваивается в соответствующем окне приложения **System Monitor**.
>>>
>>>В случае, если **не указан** внешний ID схем(ы) Carrot Engine, то исполнение команды задействуется на всех запущенных **Carrot Engine**. 
>>>
>>|||||
>>|-------------------|----------|----------|----------|
>>|`Movicom`|Отправка команд по протоколу Movicom. Поддерживается два типа команд: `Запрос статуса` и `Запуск пресета`|`Запрос статуса:` %Command=[Movicom] %Type=[GetStatus]. `Запуск пресета:` %Command=[Movicom] %Type=[SetPreset] %RunState=[Run (Запуск) или Stop (Остановка)] %PresetType=[Position (выход в точку) или Path (Траектория)] %PresetNum=[Указание номера пресета (до 65535)]|`Запрос статуса:` %Command=[Movicom] %Type=[GetStatus]. `Запуск пресета:` %Command=[Movicom] %Type=[SetPreset] %RunState=[Run] %PresetType=[Position] %PresetNum=[23]|



###### Область "Управление плейлистом"

![WP FW E Playlist Manager Elements](..\images\1.1.5\Web%20Playlist\WP%20FW%20E%20Playlist%20Manager%20Elements.png)

Область **"Управление плейлиста"** состоит из следующих разделов, представленных в таблице ниже.

| Наименование раздела       | Назначение                                      |
| -------------------------- | ----------------------------------------------- |
| **"Template Manager"** (1) | Отображение наименований существующих шаблонов. |

>![WP FW E PM Template Manager Elements](..\images\1.1.5\Web%20Playlist\WP%20FW%20E%20PM%20Template%20Manager%20Elements.png)
>Раздел **"Template Manager"** состоит из следующих элементов представленных в таблице ниже.
>
>| Наименование элемента            | Назначение                                                |
>| --------------------------------- | --------------------------------------------------------- |
>| Поле **"Search by Template name"** (1) | Поиск существующего шаблона по его наименованию. |
>| Область **"Менеджер шаблонов"** (2) | Отображение наименований существующих шаблонов.|
>> В области **"Менеджер шаблонов"** реализована возможность присвоения шаблонам статуса "Избранный".
>
>



|                            |                                                       |
| -------------------------- | ----------------------------------------------------- |
| **"Event Manager"** (2)    | Отображение сведений о существующих ивентах.          |


>![WP FW E PM Event Manager Elements](..\images\1.1.5\Web%20Playlist\WP%20FW%20E%20PM%20Event%20Manager%20Elements.png)
>
>Раздел **"Event Manager"** состоит из следующих элементов представленных в таблице ниже.
>
>| Наименование элемента            | Назначение                                                |
>| --------------------------------- | --------------------------------------------------------- |
>| Поле **"Search by Playlist name / Search by Event name"** (1) | Поиск существующего плейлиста / ивента по его наименованию. |
>| Область **"Менеджер ивентов"** (2) | Предоставление доступа к единой системе хранения и взаимодействия с ивентами (**Global Event Pool**).|
>
>**Global Event Pool** содержит все существующие ивенты распределённых по плейлистам и позволяет заимствовать уже готовые ивенты при формировании нового плейлиста.
>
>![WP FW E PM Global Event Pool Elements](..\images\1.1.5\Web%20Playlist\WP%20FW%20E%20PM%20Global%20Event%20Pool%20Elements.png)
>
>**Global Event Pool** состоит из следующих элементов:
>
>- кнопка `Remove Event(s)` (1);
>- кнопка `Unload Event(s)` (2);
>- область отображения общей информации (3);
>
>|Отображаемая информация|Назначение|
>|-------------------|----------|
>|`Event Name`|Отображение имени ивента.|
>|`Event status`|Отображение информации о **Status** ивента.|
>|`Template Name`|Отображение имени шаблона.|
>|`Last modified`|Отображение даты последней редакции.|
>
>- кнопка `Get all Events From DB` / `Get events modified within last 2 weeks` (4).
>>Кнопка `Get all Events From DB` предназначена для загрузки всех ивентов из базы данных.
>>
>>Кнопка `Get events modified within last 2 weeks` предназначена для загрузки отредактированных ивентов в течение последних 2-х недель.
>>
>>Смена кнопок между `Get all Events From DB` и `Get events modified within last 2 weeks` происходит после взаимодействия с ними.


|                            |                                                       |
| -------------------------- | ----------------------------------------------------- |
| **"Event Properties"** (3) | Отображение и настройка свойств существующих ивентов. |



>![WP FW E PM Event Properties Elements](..\images\1.1.5\Web%20Playlist\WP%20FW%20E%20PM%20Event%20Properties%20Elements.png)
>
>Раздел **"Event Properties"** состоит из следующих элементов представленных в таблице ниже.
>
>| Наименование элемента            | Назначение                                                |
>| --------------------------------- | --------------------------------------------------------- |
>| Поле **"Search by variable name"** (1) | Поиск по наименованию переменной (параметра) ивента. |
>| Область **"Свойства ивента"** (2) | Отображение и настройка свойств ивента.|
>
>>В общем случае область **"Свойства ивента"**, содержит следующие редактируемые поля, представленные в таблице ниже.
>>
>>|Редактируемое поле|Назначение|
>>|-------------------|----------|
>>|`Event Name`|Присвоение имени ивенту.|
>>|`External ID`|Присвоение внешнего уникального идентификатора ивенту.|
>>|`Allow Runtime Change`|Включение режима редактирования переменных при запущенном ивенте.|
>>|`Text Command`|Присвоение текстовых данных ивенту.|
>>|`Comment`|Написание справочной информации об ивенте (комментарий).|
>>


#### Функциональное окно "Browser"

![WP FW Browser](..\images\1.1.5\Web%20Playlist\WP%20FW%20Browser.png)

Функциональное окно **"Browser"** представляет из себя базу данных, состоящую из следующих элементов:

- область **"Кнопки взаимодействия с объектами"** (1);
- область **"Взаимодействие с объектами"** (2).

##### Область "Кнопки взаимодействия с объектами"

![WP FW B Buttons Area](..\images\1.1.5\Web%20Playlist\WP%20FW%20B%20Buttons%20Area.png)

Область **"Кнопки взаимодействия с объектами"** предназначена для взаимодействия с выбранными объектами базы данных с помощью соответствующих кнопок.

![WP FW B Buttons Elements](..\images\1.1.5\Web%20Playlist\WP%20FW%20B%20Buttons%20Elements.png)

Перечень и назначение кнопок области **"Кнопки взаимодействия с объектами"**, представлены в таблице ниже.

|Наименование кнопки|Назначение|
|-------------------|----------|
|`Add Playlist / Add Media (1)`|Добавление или создание нового плейлиста / медиа.|
|`Copy (2)`|Копирование выбранного элемента.|
|`Paste (3)`|Вставка скопированного элемента. Активируется после копирования элемента.|
|`Duplicate (4)`|Дублирование выбранного элемента.|
|`Cut (5)`|"Вырезать" выбранный элемент.|
|`Rename (6)`|Переименование выбранного элемента.|
|`Delete (7)`|Удаление выбранного элемента.|


##### Область "Взаимодействие с объектами"

Область **"Взаимодействие с объектами"** предназначена для отображения сведений о располагаемых в базе данных медиа, шаблонах и плейлистах в соответствующих разделах, а именно:

- **"Media"**;
- **"Templates"**;
- **"Playlists"**.

###### Раздел "Media"

![WP FW B OI Media Area](..\images\1.1.5\Web%20Playlist\WP%20FW%20B%20OI%20Media%20Area.png)

Раздел **"Media"** содержит информацию о медиа представленную в таблице ниже.

| Отображаемая информация | Назначение                                            |
| ----------------------- | ----------------------------------------------------- |
| `Item Name`             | Отображение сведений о наименовании медиа.            |
| `External ID`           | Присвоение медиа внешнего уникального идентификатора. |


###### Раздел "Templates"

![WP FW B OI Templates Area](..\images\1.1.5\Web%20Playlist\WP%20FW%20B%20OI%20Templates%20Area.png)

Раздел **"Templates"** содержит информацию о шаблонах представленную в таблице ниже.

| Отображаемая информация | Назначение                                                                    |
| ----------------------- | ----------------------------------------------------------------------------- |
| `Item Name`             | Отображение сведений о наименовании шаблона.                                  |
| `Content`               | Отображение сведений о наименовании "контейнера", к которому привязан шаблон. |
| `External ID`           | Присвоение шаблону внешнего уникального идентификатора .                      |
| `Date created`          | Отображение сведений о дате создания шаблона.                                 |

>В разделе **"Templates"** доступна сортировка шаблонов по следующим параметрам:
>- в порядке возрастания по первой букве имени шаблона;
>- в порядке убывания по первой букве имени шаблона;
>- в порядке возрастания от даты создания шаблона;
>- в порядке убывания от даты создания шаблона.

###### Раздел "Playlists"

![WP FW B OI Playlists Area](..\images\1.1.5\Web%20Playlist\WP%20FW%20B%20OI%20Playlists%20Area.png)

Раздел **"Playlists"** содержит информацию о плейлистах представленную в таблице ниже.

| Отображаемая информация | Назначение                                                 |
| ----------------------- | ---------------------------------------------------------- |
| `Item Name`             | Отображение сведений о наименовании плейлиста.             |
| `External ID`           | Присвоение плейлистум внешнего уникального идентификатора. |
| `Date created`          | Отображение сведений о дате создания плейлиста.            |

>В разделе **"Playlists"** доступна сортировка шаблонов по следующим параметрам:
>- в порядке возрастания по первой букве имени плейлиста;
>- в порядке убывания по первой букве имени плейлиста;
>- в порядке возрастания от даты создания плейлиста;
>- в порядке убывания от даты создания плейлиста.


#### Функциональное окно "Settings"

![WP Settings Window](..\images\1.1.5\Web%20Playlist\WP%20Settings%20Window.png)

Функциональное окно **"Settings"** предназначено для настройки параметров отображения, включения вспомогательного функционала в **Web Playlist (Carrot Dashboard)**, в том числе настройки "горячих клавиш".

![WP Settings Elements](..\images\1.1.5\Web%20Playlist\WP%20Settings%20Elements.png)

Функциональное окно **"Settings"** включается в себя следующие разделы для настройки:
- **"Global settings"** (1);
- **"Experimental settings"** (2);
- **"Hotkeys"** (3).

##### Раздел "Global settings"

|Наименование параметра|Назначение|
|-------------------|----------|
|`Clear expanded Scenarios`|Сброс состояния для всех используемых историй. Применимо в случае проблем с производительностью.|
|`Show tooltips`|Включение поясняющих сообщений (подсказок) в веб-интерфейсе (**Carrot Dashboard**).|
|`Enable force Load`|Включение режима принудетельной загрузки ассетов ивента с Carrot Server на Carrot Engine пока подгружается ивент.|
|`Sync Event name`|Включение режима, при котором значение текстовой переменной изменяется совместно с именем ивента. Функционал параметра возможен только в том случае, когда ивент имеет только одну переменную текстового типа.|
|`Always show Event states`|Включение режима, при котором отображается состояние события с двойным состоянием.|
|`Enable Scenario Only mode`|Включение режима применения функционала кнопок к текущей выбранной "истории".|
|`Send non-saved active Event changes to Engine`|Включение режима, при котором любой изменяемый параметр активного ивента будет применён и отправлен в Carrot Engine (работоспособен в случае установленной настройки **AllowRuntimeChange**). Применимо в случае работы с 3D-графикой.|
|`Show preview player`|Включение предварительного просмотра событий во вкладке свойств ивента на странице "Editor".|
##### Раздел "Experimental settings"

|Наименование параметра|Назначение|
|-------------------|----------|
|`Enable System Monitor Page`|Включение режима отображения страницы System Monitor.|
|`Show text variable line numbers`|Включение режима отображения номера строк для многострочных текстовых переменных во вкладке свойств ивента на странице "Editor". Стабильная работа прослеживается в случае наличия меньшего количества строк.|

##### Раздел "Hotkeys"

|Наименование параметра|Назначение|
|-------------------|----------|
|`Load Event`|Загрузка ивента. По умолчанию клавиша **"L"**.|
|`Load All Events`|Закрузка всех ивента. По умолчанию сочитание клавиш **"Shift + L"**.|
|`Unload Event`|Выгрузка ивента. По умолчанию клавиша **"U"**.|
|`Unload All Events`|Выгрузка всех ивентов. По умолчанию сочитание клавиш **"Shift + U"**.|
|`Take In Current Event`|Запуск текущего ивента. По умолчанию сочитание клавиш **"Ctrl + Space"**.|
|`Take Out Current Event`|Оставновка текущего ивента. По умолчанию сочитание клавиш **"Shift + Space"**.|
|`Take In Take Out Current Event`|Запуск/остановка текущего ивента. По умолчанию клавиша **"Space"**.|
|`Take In Next Event`|Запуск следующего ивента. По умолчанию клавиша **"Enter"**.|


### Работа с самоподписанным сертификат Windows

#### Создание и экспорт самоподписанного сертификата Windows

Для создания самоподписанного сертификата для **Carrot Playlist** необходимо выполнить следующие действия:

1. Запустите **PowerShell** с правами **Администратора**.
2. Скопируйте имя компьютера (ПКМ по **Этот компьютер** → **Свойства** → **Имя устройства**).
3. Введите в консоль **PowerShell** (имя компьютера необходимо ввести без кавычек)  
   `$thumbprint=New-SelfSignedCertificate -DnsName "Имя компьютера" -CertStoreLocation cert:\LocalMachine\My |ForEach-Object{ $_.Thumbprint}`
4. Создайте папку для хранения сертификатов прим. `C:\Certificates`.
5. Создайте переменную пути сертификата консольной командой `$certpath = "Путь файла с кавычками прим. C:\Certificates\pc1.pfx"`.
6. Создайте переменную пароля консольной командой `$mypwd = ConvertTo-SecureString -String 123 -Force –AsPlainText` где `123` должен быть ваш пароль.
7. Введите в консоль **PowerShell**  
   `Export-PfxCertificate -FilePath $certpath -Cert cert:\localmachine\My\$thumbprint -Password $mypwd`.
8. Для импорта сертификата на текущем компьютере введите команду `Import-PfxCertificate -FilePath  $certpath -Password $mypwd -CertStoreLocation cert:\LocalMachine\Root`

#### Импорт самоподписанного сертификата

Для импорта самоподписанного сертификата для **Carrot Playlist** необходимо выполнить следующее:

1. Запустите **PowerShell** с правами **Администратора**.
2. Создайте переменную пути сертификата консольной командой `$certpath = "Путь файла с кавычками прим. C:\Certificates\pc1.pfx"`.
3. Создайте переменную пароля консольной командой `$mypwd = ConvertTo-SecureString -String 123 -Force –AsPlainText` где `123` должен быть ваш пароль.
4. Импортируйте сертификат командой `Import-PfxCertificate -FilePath $certpath -Password $mypwd -CertStoreLocation cert:\LocalMachine\Root`



## Template Preview


### Описание пользовательского интерфейса

![TP_Main_Window.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_Main_Window.png)


Пользовательский интерфейс приложения System Monitor состоит из следующих областей представленных в таблице ниже.

| Порядковый номер | Наименование области                                     |
| ---------------- | -------------------------------------------------------- |
| 1                | Вспомогательные кнопки взаимодействия с Template Preview |
| 2                | Variables                                                |
| 3                | Scene                                                    |
| 4                | Данные потребляемой производительности рабочей стации    |
| 5                | Viewport                                                 |
| 6                | Properties                                               |


#### Область "Вспомогательные кнопки взаимодействия с Template Preview"

![TP_Buttons.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_Buttons.png)

Область **"Вспомогательные кнопки взаимодействия с Template Preview"** включает в себя кнопки, представленные в таблице ниже

| Порядковый номер | Наименование кнопки |
| ---------------- | ------------------- |
| 1                | `File`              |
| 2                | `Edit`              |
| 3                | `Tools`             |
| 4                | `Help`              |
| 5                | `🗁`                |
| 6                | `🖫`                |
| 7                | `Engine Link`       |


##### Кнопка "Edit"

![TP_Edit_Button.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_Edit_Button.png)

При взаимодействии с кнопкой `Edit` отображаются два функциональных элемента, назначение которых представлено в таблице ниже.

| Порядковый номер | Наименование функционального элемента | Назначение                                                                       | Сочетание клавиш |
| ---------------- | ------------------------------------- | -------------------------------------------------------------------------------- | ---------------- |
| 1                | `State Logic`                         | Открытие окна **"State Logic Flowchart"** для формирования **логики состояний**. | `Ctrl + L`       |
| 2                | `Scripts`                             | Открытие окна **"Script Editor"** для формирования **сценариев**.                | `Ctrl + N`       |



### Работа со State Logic

#### Что такое State Logic (Логика состояний)?

**State Logic (Логика Состояний)** – концепция, используемая в различных областях для описания логики поведения системы в зависимости от состояния, в котором она находится. Иными словами – система принимает решение, в зависимости от её текущего состояния.

В **Carrot**, мы используем концепцию **State Logic** для описания поведения **мастер шаблона (Master Template)**, в зависимости от состояний **дочерних шаблонов (Child Templates)**.

>**Мастер шаблон** - экспортируемый шаблон проекта **After Effects** или **Unreal Engine** в котором формируется поведение его логики состояний.
>
>**Дочерний шаблон** – шаблон проекта **After Effects** или **Unreal Engine** используемый для формирования логики состояния мастер шаблона.

В данной концепции, мастер шаблон связан с поведением дочернего шаблона, что позволяет при запуске **состояний дочерних шаблонов** осуществлять запуск **состояний мастер шаблона**. Таким образом, формируется автоматизированная система запуска ивентов в Carrot Dashboard.

>**Состояние (State)** – точки анимаций или событий, формируемых при создании проектов After Effects или Unreal Engine.
>
>**Ивент (Event)** – состояние шаблона After Effects или Unreal Engineв Carrot Dashboard.

#### Открытие окна формирования логики состояний "State Logic Flowchart" 

>Работа со **State Logic** осуществляется при экспорте шаблона подготовленного проекта **Unreal Engine** или **After Effects**.

Для работы со **State Logic**, необходимо в области **"Вспомогательные кнопки взаимодействия с System Monitor"** осуществить взаимодействие с кнопкой `Edit` , а затем выбрать функциональный элемент `State Logic`.

>Перед открытием окна формирования **логики состояний (State Logic)** **"State Logic Flowchart"**, необходимо убедиться, что приложение **Carrot Server** запущено.
>
>Для **быстрого** доступа к окну формирования **логики состояний (State Logic)** **"State Logic Flowchart"** можно воспользоваться сочетанием клавиш `Ctrl + L` на клавиатуре.

Последовательность действий по запуску рабочей станции представлена на рисунке ниже.

![TP_WwSL_Open_SL_Window.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_WwSL_Open_SL_Window.png)

В результате проделанных действий откроется окно **"State Logic Flowchart"**, внешний вид которого, представлен на рисунке ниже.

![TP_State_Logic_Flowchart_Window.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_State_Logic_Flowchart_Window.png)

>В качестве экспортируемого шаблона, используется проект **After Effects** с заготовленными состояниями (точками анимации) **"BC"**, **"СA"**, **"AB"**, **"ТEXT"** и **"OUT"**.

#### Добавление дочерних шаблонов

Окно **"State Logic Flowchart"** содержит область **"Flowchart"**, в которой происходит формирование и управление логикой состояний. При экспорте шаблона проекта **After Effects** или **Unreal Engine**, в области **"Registred outputs"** отображается перечень созданных состояний (точек анимаций) для данного **мастер шаблона**.

Используя `правую кнопку мыши (ПКМ)` в области **"Flowchart"**, отобразится окно добавления **дочернего шаблона** и **логических операторов**, с помощью которых и формируется логика состояний (поведения шаблона).

Внешний вид окна добавления **дочернего шаблона** и **логических операторов** представлено на рисунке ниже.

![TP_SL_Logic_Buttons.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_SL_Logic_Buttons.png)

Назначение элементов окна добавления **дочернего шаблона** и **логических операторов** представлено в таблице ниже

| Порядковый номер | Наименование элемента | Назначение                                                                                                                                                                                                                                                                                                                                           |
| ---------------- | --------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1                | Child Template        | Открытие окна **"Templates"** для выбора дочерних шаблонов **After Effects** и **Unreal Engine**.                                                                                                                                                                                                                                                    |
| 2                | OR                    | Выполнение **логического сложения** (**"ИЛИ"**).<br><br>Логический оператор будет генерировать событие в случае, если одно из подключенных состояний дочерних шаблонов было проинициализировано.                                                                                                                                                     |
| 3                | AND                   | Выполнение **логического умножения** (**"И"**).<br><br>Логический оператор будет генерировать событие в случае, если все подключенные состояния дочерних шаблонов были проинициализированы.                                                                                                                                                          |
| 4                | NOT                   | Выполнение **логического отрицания** (**"НЕ"**).<br><br>Логический оператор будет генерировать событие в случае, если подключенное состояние дочернего шаблона не было проинициализировано (инверсия работы подключенных состояний).                                                                                                                 |
| 5                | XOR                   | Выполнение **логического сложения по модулю 2** (**"Исключающее ИЛИ"**).<br><br>Логический оператор будет генерировать событие в случае, если одно из подключенных состояний дочерних шаблонов было проинициализировано, и не будет, в случае, если были проинициализированы оба (истинна тогда и только тогда, когда значения переменных различны). |
| 6                | TRIGGER               | Логический оператор будет генерировать и **фиксировать** ("запоминать") событие в случае, если одно из подключенных состояний дочернего шаблона было проинициализировано.<br><br>Сброс **фиксации** ("запоминания") события осуществляется в том случае, если логический оператор не был проинициализирован более одного раза.                       |



Добавим в область **"Flowchart"** дочерние шаблоны из окна **"Templates"**, путём взаимодействия с кнопкой `Child Template`. 

Последовательность действий по добавлению дочернего шаблона в область **"Flowchart"** представлена на рисунке ниже.

![TP_WwSL_Adding_Child_Templates 1.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_WwSL_Adding_Child_Templates%201.png)


>В качестве **дочерних шаблонов** будут использоваться сформированные шаблоны **After Effects** с наименованием **"Child Template № 1"** и **"Child Template № 2"** включающих в себя состояния (точки анимаций) .

Внешний вид добавленных дочерних шаблонов в область **"Flowchart"** окна **"State Logic Flowchart"** представлен на рисунке ниже.

![TP_WwSL_Adding_Child_Templates 2.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_WwSL_Adding_Child_Templates%202.png)

Таким образом, нода добавленного **дочернего шаблона "Child Template № 1"** содержит состояния (точки анимации) **"State 1"**, **"State 2"**, **"State 3"** и **"OUT"**, а нода  **"Child Template № 2"** -  **"State 1"**, **"State 2"** и **"OUT"**.

В заключении, добавим состояние (точку анимации) **"BC"** мастер шаблона в область **"Flowchart"**, путём его перемещения `левой кнопкой мыши (ЛКМ)` из области **"Registred outputs"** .

Результат проделанных действий по добавлению состояния (точки анимации) **"BC"** мастер шаблона в область **"Flowchart"** представлен на рисунке ниже.

![TP_WwSL_Adding_Child_Templates 3.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_WwSL_Adding_Child_Templates%203.png)

#### Работа с логическими операторами

Рассмотрим примеры формирования логики состояний с применением каждого из доступных логических операторов.

В первую очередь, следует рассмотреть логику состояний **без использования логических операторов**, для этого соединим состояние **"State 1"** дочернего шаблона **"Child Template № 1"** с состоянием **"BC"** мастер шаблона в соответствии с рисунком ниже.

![TP_WwSL_Connecting_Child_Templates.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_WwSL_Connecting_Child_Templates.png)

>**Соединение** состояний дочерних и мастер шаблонов осуществляется путём нажатия `левой кнопкой мыши (ЛКМ)` по одному из состояний шаблона и перемещения формируемой линии связи к другому.

В результате, сформированная логика состояний без использования логических операторов функционирует таким образом, что при инициализации состояния **"State 1"** дочернего шаблона **"Child Template № 1"** воспроизводится состояние **"BC"** мастер шаблона.

>При формировании логики состояний важно учитывать, что дочерний и мастер шаблоны могут воспроизводить только по **одному состоянию**.

Результат тестирования сформированной логики состояний без использования логических операторов представлена на рисунке ниже.

![TP_WwSL_Test_State_MT.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_WwSL_Test_State_MT.png)

>Для тестирования созданной логики состояний, необходимо воспользоваться кнопкой `Test` располагаемой в левом нижнем углу окна **"State Logic Flowchart"**.
>
>В случае **корректного** формирования логики состояний, состояние мастер шаблона подсвечивается <span style="color:green">зелёным цветом</span>.

Далее рассмотрим пример формирования логики состояний с использованием логического оператора **"OR"**, для этого соединим состояния **"State 1"** дочерних шаблонов **"Child Template № 1"** и **"Child Template № 2"** с состоянием **"BC"** мастер шаблона через логический оператор в соответствии с рисунком ниже.

![TP_WwSL_Connecting_OR_Child_Templates.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_WwSL_Connecting_OR_Child_Templates.png)

>Для **удаления** ноды или линии связи между ними, необходимо выделить `левой кнопкой мыши (ЛКМ)` интересующий объект и нажать кнопку `Delete` на клавиатуре.

Функционал сформированной логики состояний с использованием логического оператора **"OR"** реализован таким образом, что при инициализации состояний **"State 1"** дочерних шаблонов **"Child Template № 1"** или **"Child Template № 2"**, происходит генерация логическим оператором сигнала, воспроизводящего состояние **"BC"** мастер шаблона. 

Результат тестирования сформированной логики состояний с использованием логического оператора **"OR"** представлен на рисунке ниже.

![TP_WwSL_Test_OR_State_MT.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_WwSL_Test_OR_State_MT.png)

Затем сформируем логику состояний с использованием логического оператора **"AND"**, для этого соединим состояния **"State 1"** дочерних шаблонов **"Child Template № 1"** и **"Child Template № 2"** с состоянием **"BC"** мастер шаблона через логический оператор в соответствии с рисунком ниже.

![TP_WwSL_Connecting_AND_Child_Templates.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_WwSL_Connecting_AND_Child_Templates.png)

Сформированная логика состояний с использованием логического оператора **"AND"** реализована таким образом, что при инициализации состояний **"State 1"** дочерних шаблонов  **"Child Template № 1"** и **"Child Template № 2"**, происходит генерация логическим оператором сигнала, воспроизводящего состояние **"BC"** мастер шаблона. 

Результат тестирования сформированной логики состояний с использованием логического оператора **"AND"** представлен на рисунке ниже.

![TP_WwSL_Test_AND_State_MT.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_WwSL_Test_AND_State_MT.png)

Рассмотрим пример формирования логики состояний с использованием логического оператора **"NOT"**. Для более наглядной демонстрации его работы, в схему следует добавить два логических оператора, затем соединить через них состояния **"State 1"** дочерних шаблонов **"Child Template № 1"** и **"Child Template № 2"** с состоянием **"BC"** мастер шаблона в соответствии с рисунком ниже.

![TP_WwSL_Connecting_NOT_Child_Templates.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_WwSL_Connecting_NOT_Child_Templates.png)

В результате сформированного функционала логики состояний с использованием логических операторов **"NOT"** получим, что при инициализации состояний  **"State 1"** дочерних шаблонов **«Child Template № 1»** и **«Child Template № 2»** первый в очереди (слева направо) логический оператор **"NOT"** передаёт инвертированный сигнал на следующий за ним логический оператор **"NOT"**, а он в свою очередь повторно инвертирует полученный сигнал и передаёт его для воспроизведения состояния **"BC"** мастер шаблона. 

Результат тестирования сформированной логики состояний с использованием логических операторов **"NOT"** представлен на рисунке.

![TP_WwSL_Test_NOT_State_MT.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_WwSL_Test_NOT_State_MT.png)

#### Пример работы логики состояний с использованием логических операторов "AND", "OR" и "NOT"

Рассмотрим работу сформированной логики состояний с использованием логических операторов **"AND"**, **"OR"** и **"NOT"**, внешний вид которой представлен на рисунке ниже.

![TP_WwSL_OR_AND_NOT_Example.png](..\images\1.1.6\Carrot%20Basics\Template%20Preview\TP_WwSL_OR_AND_NOT_Example.png)

Перечень реализованных взаимосвязей сформированной логики состояний с использованием логических операторов **"AND"**, **"OR"** и **"NOT"**, а также состояний дочерних и мастер шаблонов представлен в таблице ниже.


<table>
  <thead>
    <tr>
      <th>Наименование дочернего шаблона</th>
      <th>Наименование состояния дочернего шаблона</th>
      <th colspan="2">Наименование логического оператора</th>
      <th>Наименование состояния мастер шаблона</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan="8">Child Template № 1</td>
      <td rowspan="2">State 1</td>
      <td colspan="2">---</td>
      <td>BC</td>
    </tr>
    <tr>
      <td colspan="2">AND</td>
      <td>BC</td>
    </tr>
    <tr>
      <td rowspan="3">State 2</td>
      <td colspan="2">---</td>
      <td>CA</td>
    </tr>
    <tr>
      <td colspan="2">---</td>
      <td>CA</td>
    </tr>
    <tr>
      <td colspan="2">---</td>
      <td>AB</td>
    </tr>
    <tr>
      <td rowspan="2">State 3</td>
      <td colspan="2">---</td>
      <td>AB</td>
    </tr>
    <tr>
      <td colspan="2">---</td>
      <td>TEXT</td>
    </tr>
    <tr>
      <td>OUT</td>
      <td colspan="2">---</td>
      <td>OUT</td>
    </tr>
    <tr>
      <td rowspan="11">Child Template № 2</td>
      <td rowspan="3">State 1</td>
      <td colspan="2">---</td>
      <td>CA</td>
    </tr>
    <tr>
      <td rowspan="2">OR</td>
      <td>AND</td>
      <td>BC</td>
    </tr>
    <tr>
      <td>---</td>
      <td>TEXT</td>
    </tr>
    <tr>
      <td rowspan="3">State 2</td>
      <td colspan="2">---</td>
      <td>AB</td>
    </tr>
    <tr>
      <td rowspan="2">OR</td>
      <td>AND</td>
      <td>BC</td>
    </tr>
    <tr>
      <td>---</td>
      <td>TEXT</td>
    </tr>
    <tr>
      <td rowspan="5">OUT</td>
      <td colspan="2">---</td>
      <td>BC</td>
    </tr>
    <tr>
      <td colspan="2">---</td>
      <td>CA</td>
    </tr>
    <tr>
      <td colspan="2">---</td>
      <td>AB</td>
    </tr>
    <tr>
      <td colspan="2">OR</td>
      <td>OUT</td>
    </tr>
    <tr>
      <td>NOT</td>
      <td>OR</td>
      <td>OUT</td>
    </tr>
  </tbody>
</table>


В результате, сформированная логика состояний содержит функционал, представленный в таблице ниже.

<table>
  <thead>
    <tr>
      <th>Наименование инициализируемого состояния дочернего шаблона Child Template № 1</th>
      <th>Наименование инициализируемого состояния дочернего шаблона Child Template № 2</th>
      <th>Воспроизводимое состояние мастер шаблона</th>
  </thead>
  <tbody>
    <tr>
      <td rowspan="3">State 1</td>
      <td>State 1</td>
      <td rowspan="3">BC</td>
    </tr>
    <tr>
      <td>State 2</td>
    </tr>
    <tr>
      <td>OUT</td>
    </tr>
    <tr>
      <td rowspan="3">State 2</td>
      <td>State 1</td>
      <td>CA</td>
    </tr>
    <tr>
      <td>State 2</td>
      <td>AB</td>
    </tr>
    <tr>
      <td>OUT</td>
      <td>CA</td>
    </tr>
    <tr>
      <td rowspan="3">State 3</td>
      <td>State 1</td>
      <td rowspan="2">TEXT</td>
    </tr>
    <tr>
      <td>State 2</td>
    </tr>
    <tr>
      <td>OUT</td>
      <td>AB</td>
    </tr>
	<tr>
      <td rowspan="3">OUT</td>
      <td>State 1</td>
      <td rowspan="3">OUT</td>
    </tr>
    <tr>
      <td>State 2</td>
    </tr>
    <tr>
      <td>OUT</td>
    </tr>
  </tbody>
</table>













## Carrot Engine

### Settings.

Рассмотрим подробнее меню навигации **Carrot Engine**.

- `File` - `Settings` - открывает настройки Launcher. Подробнее о данном пункте можно прочитать [здесь](https://carrotsoftware.github.io/docs/3189/#/settings?id=settings-1).
- `View` - `Full Screen` - открывает **viewport** на полный экран.
- `View` - `Scale To Fit` - растягивает **viewport** под размер окна.
- `Delays` - `Show Delays Form` - окно для настройки задержек. Где `Input Delay` - задержка входного сигнала, а `Tracking Delay` - задержка по трекингу. Правильная настройка задержек убирает "плавучий" эффект при работе с графикой.
- `Tools` - `Workstation Registration` - открывает окно Workstation Registration, подробнее о его настройке можно прочитать [здесь](https://carrotsoftware.github.io/docs/3189/#/workflow?id=_22-workstation-registration).
- `Tools` - `Dummy Output` - заглушка выставляемая вместого изображения выдаваемого **Carrot Engine**.

---
---

### Carrot Engine. BMD Tracking Input.

#### Tools. Keyer Settings.

> Carrot Keyer - программный модуль позволяющий размещать нужный объект с зелёного фона на виртуальный (или любой другой) фон при помощи технологии рир-проекции.

*Входной сигнал*:
![](..\images\example_keyer\original.png)

*Результат без настроек кеера*:
![](..\images\example_keyer\default.png)

*После настройки кеера*:
![](..\images\example_keyer\stage_11.png)

1. Откройте **Carrot Engine**.
2. Выберите **Tools > Contents Settings > Keyer Settings** или нажмите клавишу **F7**, чтобы открыть все доступные окна настроек.
   <br>![](..\images\example_keyer\screen_01.png)


> Для удобства настройки рекомендуется перейти в режим отображения **Mode > MultiView**, чтобы наблюдать за изменениями на всех этапах кеинга.
>
> Также для удобного переключения между режимами отображения вы можете использовать горячие клавиши (*для этого окно `Keyer`'а должно быть выбрано активным*):
> - `Shift` + `D` - DeNoise.
> - `Shift` + `E` - Enviroment Overlay.
> - `Shift` + `S` - Screen Mask.
> - `Shift` + `F` - Final Result.

![](..\images\example_keyer\stage_01.png)

- Foreground - отображение переднего плана.
- DeNoise - отображение Foreground с шумоподавлением.
- DeSpill - отображение Foreground с избавлением от цветовых рефлексов.
- Screen Restoration - отображение Foreground с восстановлением зеленого цвета.
- Alpha Mask - отображение маски объекта, который нужно прокеить.
- Screen Mask - отображение области кеинга.
- Shadows - отображение областей в которых происходит контрастирование теней.
- Highlights - отображение областей в которых происходит контрастирование отражений.
- Background - отображение заднего плана.
- Environment Overlay - это отображение цвета накладываемого на передний план.
- Environment Light - это отображение цвета накладываемого на контур объекта на переднем плане.

В правом нижнем углу для удобства расположены вектороскоп и гистограмма.
![](..\images\example_keyer\stage_02.png)

> Для наилучшего результата значения вектороскопа должны доходить до середины линии **_G_** или **_B_** в зависимости от цвета хромакея.<br>
> <br>Для наилучшего качества гистограмма должна быть максимально ровной, растянутой по всей границе и без пиков по краям.<br>
> <br>Нажатием **ЛКМ** или **ПКМ** по гистограмме можно посмотреть отдельно информацию по каждому цветовому каналу.

В начале нужно задать цвет хромакея, для этого:

1. Во вкладке **Alpha Mask** нажмите на кнопку `Pick` и с помощью **ЛКМ** щёлкните по любому участку хромакея на экране.
2. Оцените результат в окне режима _Alpha Mask._

##### DeNoise

Наблюдаем, что изображение в _Alpha Mask_ имеет много шума, избавиться от него можно при помощи инструмента **DeNoise**:<br>
Во вкладке **DeNoise** имеются два параметра:

1. `Threshold` - порог срабатывания, позволяющий сохранить четкие границы на объектах;
2. `Radius` - радиус размытия в пикселях (в обычных случаях хватает значений до `50`).

Выставите значение `Threshold` в `0` и понемногу увеличивайте до требуемого результата. По необходимости скорректируйте параметр `Radius`.

Результат:
![](..\images\example_keyer\stage_03.png)

> Чтобы вернуть настройки по умолчанию, нажмите **ПКМ** по области стрелок нужного счетчика.

Режим _Final Result_:
![](..\images\example_keyer\stage_04.png)

##### DeSpill

Картинка избавилась от лишнего шума, теперь необходимо убрать голубые границы с человека. Они возникли в результате того, что _DeSpill_ не соответствует заднему фону по тону и яркости.

> Если задний фон тёмный, а _DeSpill_ светлый, то на объекте будут видны белые границы и наоборот.

Чтобы исправить границы на объекте:

1. Переключите окно в режим отображения _DeSpill_.
   <br>Параметры вкладки **DeSpill**:
   - `Preset` - настройка соотношения красного и синего. В нашем случае лучше всего подошёл пресет **Average**.
     <br>Лучше всего добиться максимально серого цвета у **DeSpill** до наложения параметра `Saturation`.

- `Saturation` - смешивание с задним фоном по цвету.
- `Darken` и `Brighten` - изменение яркости тёмных и светлых областей.
  > Для наилучшего результата _DeSpill_ должен соответствовать по оттенкам и яркости изображению на _Background_.

Результат:
![](..\images\example_keyer\stage_05.png)

##### Screen Restoration

Сравните окно _Screen Restoration_ с _Foreground_, в итоге должен получиться зеленый цвет без лишних объектов. Для настройки этого окна используется вкладка **Inner Mask**:

> **Inner Mask** помогает справиться с проблемными и дефектными элементами на объекте (например, зелеными пуговицами на человеке и т.п.)

1. С помощью инструментов `Red Weight`, `Blue Weight` и `Mask Levels` сделайте максимально возможную непрозрачную маску для необходимых объектов.
2. Наблюдайте за результатом в окнах _Inner Mask_, _Alpha Mask_ и _Screen Restoration_.

Результат:<br>
_Inner Mask_
![](..\images\example_keyer\stage_06.png)
_Alpha Mask_
![](..\images\example_keyer\stage_07.png)
_Screen Restoration_
![](..\images\example_keyer\stage_08.png)

##### Alpha Mask

Теперь необходимо скорректировать саму маску. Для этого:

1. Во вкладке **Alpha Mask** выставите значение параметров `J Weight`, `Red Weight`, `Blue Weight`, `Inner Mask` на `0`.
2. Во вкладке **Alpha Mask (Advanced)** выберите `Key Type` - `UCS`.
   > У `RGB` параметры `Red Weight` и `Blue Weight` работают как процент вытеснения зелёного, т.е. в сумме эти два параметры должны, в идеале, составлять **единицу**.
3. За счёт параметров `Border Light` и `Border Dark` максимально проявите объект.

> `B. Feather` отвечает за смещение маски от границы **Inner Mask** до такого же расстояния снаружи объекта.

> `Floor Levels` отвечает за улучшения маски у объектов, помеченных как `Chromakey Floor` во вкладке **Mask.** 4. Во вкладке **`Alpha Mask`** начинаем подбирать параметр **`Inner Mask`** в районе значения `0,5`. 5. Далее мы изменяем значение параметров `Red Weight` и `Blue Weight` до `1`. Если маски не хватает, то мы начинаем добавлять значение `J Weight` (разность яркости с _Screen Restoration_ и _Foreground,_ работает только с `Key Type` _-_ `UCS`). Если визуально этот параметр не оказывает заметного эффекта на _Alpha Mask_, то лучше его отключить. С помощью `Mask Levels` можно “подчистить” маску, чтобы остались только необходимые объекты.

> Если видно мерцание кея, то его можно уменьшить через правки `Threshold` и `Radius` вкладки **Denoise.**

_Final Result_
![](..\images\example_keyer\stage_09.png)

##### Shadows & Highlights

Для усиления отображения теней и отражений можно использовать вкладки **Shadows** и **Highlights**, однако в данном примере эти настройки не требуются и остаются выключенными.

##### Environment

Для улучшения эффекта "вживления" объекта с окружением можно воспользоваться вкладкой **Environment** и режимами отображения _Environment Overlay_ и _Environment Light_:

1. `Overlay` - уровень наложения фона на объекты.
2. `Overlay Blur` - размытие фона, лучше оставлять детали до тех пор, пока это не будет заметно на объектах первого плана.
3. `Light Strength` - степень засветки по краям объектов.
4. `Light Blur` - размытие фона для засветки
5. `Light Levels` - корректировка уровней яркости фона для засветки

> Для наилучшего результатас помощью Light Levels нужно оставлять только те элементы, которые действительно в реальности могут давать засвет на края объекта.

_Environment Light_
![](..\images\example_keyer\stage_10.png)

_Environment Overlay_
![](..\images\example_keyer\stage_12.png)

Итоговый результат:
![](..\images\example_keyer\stage_11.png)

##### Save / Save As

Завершив настройку кеера не забудьте сохранить данные изменения. Для этого можно воспользоваться функцией `Save` / `Save As`, данные пресеты будут сохранены на сервере и могут быть использованы в любое удобное время.

`Save As` - при сохранении настроек (*если они до этого не были сохранены*) появится новое диалоговое окно.

`Save` - сохраняет настройки либо как новые, либо их можно сохранить в уже существующие, тем самым обновив их для всех устройств.

Настройки можно сохранить как новые так и в уже имеющиеся, обновив их для всех использующих **Keyer**'ов. Если настройки были сохранены до, они запишутся туда же.

Настройки для **Keyer**, **Luma** и **AR** разделены, поэтому установить настройки от **AR** в **Keyer** не получится.

Ненужные настройки можно будет удалить через **System Monitor**. В нем появилась вкладка `KeyerSettings`.

![System Monitor_Keyer Settings](..\images\4062\image_068.jpg "System Monitor - Keyer Settings")

В левой части список всех настроек **Keyer**, **AR**, **Luma**. Справа список контейнеров, где применены эти настройки. Настройки можно удалять (возможно удаление сразу нескольких настроек). В случае удаления, настройки на устройствах сбросятся к дефолтным.


#### Tools. AR.

> Дополненная реальность (AR) позволяет внедрить виртуальные 3D объекты и сцены в реальное окружение в реальном времени.

##### Подготовка Engine Scheme для работы с AR:

> Подробнее читайте в разделе [Создание схемы работы Carrot Engine](https://carrotsoftware.github.io/docs/4062/#/workflow?id=%d0%a1%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d1%81%d1%85%d0%b5%d0%bc%d1%8b-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d1%8b-carrot-engine).

1. Откройте Carrot SystemMonitor.
2. Создайте новую схему или выберите уже созданную.
3. Добавьте к схеме необходимую рабочую станцию.
4. нажмите `Edit Scheme` и перейдите в окно `Engine Flowchart`.

![ar02](../images/example_ar/ar02.png)

В окне `Engine Flowchart`:

1. Перетащите используемые вами ноды входного и выходного сигнал.
2. Добавьте контейнер для отображение контента из Unreal Engine и укажите ему имя (например, UE_AR).
3. Нажмите ПКМ и добавьте ноду `AR`.
4. Подсоедините контейнер UE_AR в `Foreground`, ноду с входящим видеосигналом в `Background`.
5. Пин `video` из ноды AR подключите к пину `video` выходного изображения, простейшая схема будет выглядеть как показано на скриншоте.<br>![ar03](../images/example_ar/ar03.png)

##### Подготовка проекта Unreal Engine для работы с AR
Изначальная настройка проекта UE4 описана в пункте [Подготовка UE4 проекта к экспорту шаблона (новый плагин)](https://carrotsoftware.github.io/docs/4062/#/unrealengine?id=%d0%9d%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-ue-%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82%d0%b0-%d0%bd%d0%be%d0%b2%d1%8b%d0%b9-%d0%bf%d0%bb%d0%b0%d0%b3%d0%b8%d0%bd-%d1%86%d0%b2%d0%b5%d1%82%d0%bd%d0%b0%d1%8f-%d0%bf%d0%be%d0%bb%d0%be%d1%81%d0%ba%d0%b0).

`Carrot Engine` работает в режиме `AR` на основе метода наложения `Screen\Add` по серому цвету и масками через `Custom Stencil Buffer`. Для удобства работу рекомендуем все созданные сцены и объекты создавать в своих отдельных уровнях и потом подгружать их в основной уровень проекта, настроенный под вывод Carrot.

Для работы AR понадобятся следующие типы объектов:

- Геометрия циклорамы с серым эмиссивным материалом.
- Захватчик отражений и теней.

###### Циклорама и материал
`Циклорама` представляет из себя объект заполняющий весь видимый объем сцены. Это может быть куб, сфера либо заранее подготовленная модель с наложенным `Unlit` материалом.

Пример геометрии:<br>![ar05_2](../images/example_ar/ar05_2.png)

Пример материала с вводом цвета через [Material Parameter Collection](https://docs.unrealengine.com/4.27/en-US/RenderingAndGraphics/Materials/ParameterCollections/):<br>![ar05](../images/example_ar/ar05.png).

###### Захватчик отражений и теней.

`Захватчик отражений и теней` представляет из себя плоскость с настраиваемым материалом по Metallic и Roughness. Подбирая эти 2 значения, можно отображать только отражения, только тени или всё вместе. Вторая плоскость накладывается сверху с Unlit материалом серого цвета с плавным градиентом, чтобы избавиться от четких краев первой плоскости и смешаться с окружением.

Пример материала маски:<br>![ar05_3](../images/example_ar/ar05_3.png)

Пример материала для теней и отражений:<br>![ar05_4](../images/example_ar/ar05_4.png)

Пример Blueprint Actor:<br>![ar05_5](../images/example_ar/ar05_5.png)

>Для получения зеркальных отражений без RayTracing можно использовать `PlanarReflection`.

###### Настройка объектов
Добавив объекты в сцену, нам нужно указать непрозрачным объектам `Custom Depth Pass`. В противном случае Carrot будет совмещать слои на основе метода наложения `Screen\Add`. Для этого:

1. Выделите нужные объекты на уровне/блупринте.
2. Наберите в строке поиска окна `Details` ключевое слово `"custom"`.
3. Поставьте галочку напротив свойства `Render CustomDepth Pass`.
4. Поставьте свойство `CustomDepth Stencil Value` - `255`.<br>![ar06](../images/example_ar/ar06.png)

Результат работы в Carrot Engine с CustomStencil 255 и без:<br>![ar06_2](../images/example_ar/ar06_2.png)

###### Использование масок
AR композитинг работает по схеме, когда изображение с графикой накладывается поверх изображения настоящего. Иногда появляется возможность виртуальные объекты "обрезать" по форме реальных декораций. Для этой задачи мы можем использовать маски.

1. Добавьте необходимую геометрию на уровень.
2. Поставьте ей тот же материал, что и на серой циклораме.
3. Поставьте галочку напротив свойства `Render CustomDepth Pass`.
4. Поставьте свойство `CustomDepth Stencil Value` - `0`.<br>![ar06_3](../images/example_ar/ar06_3.png)

Результат работы масок:<br>![ar06_4](../images/example_ar/ar06_4.png)

##### Настройка AR в Carrot Engine

Экспорт шаблона происходит так же, как описано в пункте [Экспорт шаблона из проекта UE4](https://carrotsoftware.github.io/docs/4062/#/workflow?id=Экспорт-шаблона-из-проекта-ue4).

Чтобы открыть панель настроек ноды `AR`:

1. Откройте окно `Carrot Engine`
2. Откройте сверху меню `Tools` - `Show Content Settings` - `AR`

   ![ar07](../images/example_ar/ar07.png)

   Откроется окно настроек AR

   ![ar08](../images/example_ar/ar08.png)

3. В разделе `Gamma Correction` - `AR BG Color` нажмите на кнопку `Pick`, если серый цвет циклорамы выбран правильно значения `RGB Gamma` должны быть максимально близки к `1.000` как показано на скриншоте выше.

   ![ar11](../images/example_ar/ar11.png)

   В настройках `Carrot Engine` поставьте галочки `Enable` в разделах `Shadows` и `Highlights`.

   Для получения наилучших результатов используйте ползунки `Levels` а также параметрами `Metallic` и `Roughness` в материале захватчика теней и отражений.

4. Дополнительная информация по настройкам сцен AR

   - Рекомендуем использовать `Skylight` c серой `Cubemap` как показано на скриншоте, чтобы получить равномерно подсвеченную картинку для отражений.

   ![ar12](../images/example_ar/ar12.jpeg)

   - Убедитесь что у Вас отключен эффект `Vignette` в камере которую использует Carrot и в `PostProcessVolume` он приводит к артефактам по краям кадра как показано на скриншоте.

   ![ar14](../images/example_ar/ar14.jpeg)

   - Обратите внимание, что используя цветокоррекцию в `PostProcessVolume`, также затрагивается и цвет серой циклорамы. Альтернативно, цветокоррекцию можно проводить в окне `AR` внутри `Carrot Engine` во вкладка `BG`.

#### Tools. Luma.

`Luma` - это кеер, который формирует альфа маску из внешнего сигнала.

Текстура с `Luma` должна иметь два цвета: **белый** и **чёрный**, где **белый** - `Foreground`, а **чёрный** - `Background`.

1. Составим схему для работы с `Luma`. Для этого заведём изображение на `Foreground`, `Background`. В `Luma` добавим изображение с заготовленными полями для кеинга.

![Settings_Carrot Engine_Luma](..\images\3189\image_047.jpg "Carrot Engine - Luma")

![Settings_Carrot Engine_Luma](..\images\3189\image_048.jpg "Carrot Engine - Luma")

2. Запустим движок.

![Settings_Carrot Engine_Luma](..\images\3189\image_049.jpg "Carrot Engine - Luma")

3. В запущенном движке видно градиент наложенный Luma.

4. Перейдём в настройки инструмента. `Tools` - `Content Settings` - `Luma Settings`.

5. Здесь можно настроить шумоподавление, а также альфу `Luma`.

6. Движение ползунка меняет преимущество белого и чёрного цвета на текстуре (при наличии градиента).

![Settings_Carrot Engine_Luma](..\images\3189\image_050.jpg "Carrot Engine - Luma")

![Settings_Carrot Engine_Luma](..\images\3189\image_051.jpg "Carrot Engine - Luma")

7. Итог.

![Settings_Carrot Engine_Luma](..\images\3189\image_052.jpg "Carrot Engine - Luma")

#### Tools. LUT.

>**Carrot Engine** имеет возможность создавать `LUT файлы` для дальнейшего использования их на посте или в движке на `Foreground` / `Background`.

1. Перейдём по пути `Tools` - `LUT Utils`.
2. Перед нами открылось окно `LUT Utils`, а во `Viewport`'е появились 24 разноцветные точки.
![Settings_Carrot Engine_LUT](..\images\3189\image_043.jpg "Carrot Engine - LUT")
3. Используем цветовую палитру с 24-цветной шкалой, выставим её перед камерой так, чтобы квадраты с цветами попали в точки размещённые во `Viewport`'е.
![Settings_Carrot Engine_LUT](..\images\3189\image_044.jpg "Carrot Engine - LUT")
4. В `LUT Utils` графе `Checker` нажмите на `Pick Checker Colors` для получения цветов из карточки.
5. В графе  `Process` нажать на `Process`.
6. Выберите формат для экспорта `LUT`. `PNG` для экспорта в Carrot. `.CUBE` для работы с прочими графическими редакторами.
7. Готово. Можно закрыть `LUT Utils`.
8. Если нужно наложить `LUT` на передний или задний план, перейдите в `Tools` - `Keyer`. Здесь выберите `FG` или `BG`.
9. В графе `FG` / `BG` найдите `LUT` - `Filename` и нажмите на `...`. 
![Settings_Carrot Engine_LUT](..\images\3189\image_045.jpg "Carrot Engine - LUT")
10. Выберите экспортированный `LUT` файл.
11. Готово.

![Settings_Carrot Engine_LUT](..\images\3189\image_046.jpg "Carrot Engine - LUT")

#### Tools. GPIO, MIDI, Macro.

#### Назначение команд с локального плейлиста.

Управление плейлистом Carrot возможно через контроллеры GPIO, MIDI, Macro. Для этого:

1. Подключите необходимый модуль к серверу.
2. В **Carrot Engine** нажмите `Tools` => `GPIO` / `MIDI` / `Macro`.
3. Перед вами откроется окно настроек контроллера.

![Settings_Carrot Engine_GPIO_MIDI_Macro](..\images\4062\image_055_4147.jpg "Carrot Engine - GPIO, MIDI, Macro")

4. Раскройте меню `Playlist`, чтобы выбрать плейлист для управления через контроллер.

![Settings_Carrot Engine_GPIO_MIDI_Macro](..\images\4062\image_056_4147.jpg "Carrot Engine - GPIO, MIDI, Macro")

5. Из региона `Playlist Events` перенесите события в регион `Assigned Events`.

![Settings_Carrot Engine_GPIO_MIDI_Macro](..\images\4062\image_057_4147.jpg "Carrot Engine - GPIO, MIDI, Macro")

6. Нажмите на клавишу контроллера. Если контроллер подключен правильно, то в графе `Cmd` вы должны получить значение отличное от `0`.

7. Назначьте полученное значение событию в правом регионе. Для этого нажмите на него через `ЛКМ` и в нижней графе `Cmd` введите полученое значение сверху. Нажмите `Enter` и кнопку `Save`. Если после введёного значения нажать на клавишу контроллера без предварительного `Save`, команда в графе `Cmd` сбросится.

![Settings_Carrot Engine_GPIO_MIDI_Macro](..\images\4062\image_058_4147.jpg "Carrot Engine - GPIO, MIDI, Macro")

8. Готово. Событие можно использовать с контроллера.

---

#### Назначение команд с внешнего плейлиста

>**В случае если плейлист находится на другом сервере, вы можете достучаться до него используя модуль `InputDevices`. Для этого нужно:**

1. В папке `Carrot` => `Bin` откройте приложение `InputDevices.exe`.
2. Оно не раскроется во `Viewport`'е, однако его можно найти в списке скрытых значков.
>![Settings_Carrot InputDevices](..\images\4062\image_059.jpg "Carrot InputDevices")
3. Нажмите `ПКМ` по иконке `InputDevices` и выберите графу `Settings`.
4. Активируйте `Input`, который предполагаете использовать.
5. Введите IP адрес хост-сервера, где расположен плейлист.
![Settings_Carrot InputDevices](..\images\4062\image_060.jpg "Carrot InputDevices")
6. Запустите `GPIO` / `MIDI` / `Macro` через `ПКМ` по `InputDevices` и настройте его.

---

#### Описание кнопок

`Isolated Channels` - данный параметр позволяет каждому из 8-ми каналов обрабатываться отдельно. В этом случае при приходе сигнала будет отображаться не его значение, а номер канала, по которому он пришел.

Привязывать показ эвентов нужно следующим образом: 
- 1 - показ 1й плазмы;
- 2 - показ 2й плазмы;
- 3 - показ 3й плазмы.

Для отслеживания "отжатия" нужно привязать на другое событие номер канала со знаком `-`:
- -1 - скрытие 1й плазмы;
- -2 - скрытие 2й плазмы;
- -3 - скрытие 3й плазмы.

`Log` - в папке `Logs` в файле **InputDevices** будет записываться пришедшее значения и время прихода.

`Invert Input` отвечает за инвертирование значения (в битовом значении), которое пришло. Например, если галка активна, то приходящее значение (**1-1-1-0-0-0-0-0**) будет обрабатываться как (**0-0-0-0-0-1-1-1**).

`Invert Output` вывод инвертированного значения (в битовом значении), которое привязано на событие. Например, если галка активна, то отправляемое значение (**0-0-0-0-0-1-0-1**) будет передано как как (**1-0-1-0-0-0-0-0**).

Если галки `Invert Input` и `Invert Output` выключены, то, например, значение (**0-0-0-0-0-1-1-1**), привязанное к событию, будет передано на вывод без изменений при активации события.

## DataStream Server

### Settings

>DataBase

- `Directory` - расположение базы данных Carrot.
- `DB autoreplication` -  автоматическая репликация (копирование) базы данных от Host-сервера.
- `Directory` - расположение папки с плагинами.

>Licence
- `Licence Key` - лицензионный ключ для открытия полного функционала Carrot.

>Network
- `Server Host` - имя или IP-адрес Host-сервера.
- `Secure` - используется, если предполагается шифрованное соединение.
- `Reserve Server Host` - имя или IP-адрес резервного сервера.

>Plugins
- `Stop plugin if error` - остановка плагина при возникновении ошибки.

>User
- `Auto Logon` - автоматическое подключение пользователя при запуске приложения.
- `User Name` - имя пользователя (подробнее о правах доступа в [параграфе ?.?](test.md))
- `Password` - пароль пользователя.



### Начало работы с DataStream

`DataStream` - инструмент предназначенный для быстрого редактирования переменных в плейлисте через **XML** или **XLSX** файлы.



#### Описание функций DataStream

Структура приложения представляет собой **три раздела**: `Tables`, `Plugins`, `Settings`.

Разделы `Tables` и `Plugins` имеют схожее построение регионов.

>Таблицы:
- Первый регион: Добавление / Удаление таблиц.
- - `Add Table` - добавить таблицу.
- - `Delete Table` - удалить таблицу.
- Второй регион: Правила выбранной таблицы.
- - `Table Name` - изменить название выбранной таблицы.
- - `Add Cell` - создать ячейку с переменной.
- - `Sort by` - сортировать по: дате создания, дате внесённых изменений, имени.
- - `Link Cells` - привязать ячейку к событию в плейлисте.
- - `Unlink Cells` - удалить все связи с плейлистом.
- - `Delete Cells` - удалить ячейку.
- Третий регион: Настройка выбранной ячейки таблицы.
- - `Remove Link` - удалить выбранную связь (*например: удаление изменения параметра внесённого текста в титре*).
- - `Update Cell` - внесение изменений в ячейку (*аналогично кнопке "Сохранить"*).
- - `Cell: Value` - значение переменной: текстовые и численные.
- - `Common: Changed` - дата изменения переменной.
- - `Common: Created` - дата создания переменной.
- - `Common: Name` - имя переменной.

>Плагины:
- Первый регион: Добавление / Удаление плагинов.
- - `Add Plugin` - добавить плагин.
- - `Delete Plugin` - удалить плагин.
- Второй регион: Правила выбранного плагина.
- - `Plugin Name` - изменить название выбранного плагина.
- - `Add Rule` - создать правило. 
- - `Delete Rule` - удалить правило.
- Третий регион: Настройка выбранного правила плагина.
- - `Edit Cells` - добавляет выбранные ячейки для взаимодействия с данным правилом.
- - `Generate cells` - доступно только для **XLSX-таблиц**, создаёт задействованные ячейки в таблице в `DataStream` - `Tables`.
- - `Update Rule` - внесение изменений в правило (*аналогично кнопке "Сохранить"*).
- - `Common: Changed` - дата изменения переменной.
- - `Common: Created` - дата создания переменной.
- - `Common: Name` - имя переменной.
- - `Rule: Enabled` - включить / выключить правило.
- Дополнительный раздел для XML-таблиц.
- - `XML Parser: Path` - местоположения файла с форматом **XML**. 
- - `XML Parser: Update Interval` - интервал проверки файла в секундах. 
- Дополнительный раздел для XLSX-таблиц.
- - `XLSX Parser: Excluder` - исключает выбранную ячейку или диапазон.
- - `XLSX Parser: Path` - местоположения файла с форматом **XLSX**. 
- - `XLSX Parser: Selector` - задаёт строгий диапазон или ячейку для внесения переменных.
- - `XLSX Parser: Sheet Name` - имя листа.
- - `XLSX Parser: Update Interval` - интервал проверки файла в секундах. 
- - `XLSX Parser: Update Type` - при использовании `ByTime` берёт интервал из параметра `Update Interval`, при использовании `ByChange` вносит изменения после каждого сохранения (*данная функция работает не стабильно, рекомендуем использовать параметр* `ByTime`). 

Рассмотрим **три** типа смены данных в переменных шаблона.




#### Первый тип "Локальный"

1. Перейдём в раздел `Tables`.
![](..\images\image57.png)
![DataStream_Tables_Tables](..\images\DataStream\image_002.jpg "Tables")

2. Нажимаем `Add Table` (*Если необходимо удалить созданную таблицу нажимаем* `Delete Table`).

![DataStream_Tables_Add Table](..\images\DataStream\image_003.jpg "Add Table")

3. Нами была создана таблица с названием по умолчанию "**New Table**". Для удобства работы с таблицами, мы можем переименовать её во втором регионе в разделе `Table Name`. Вводим название, нажимаем `Apply`.

![DataStream_Tables_Table Name](..\images\DataStream\image_004.jpg "Table Name")

4. Далее создаём ячейку через нажатие кнопки `Add Cell`. Одна ячейка хранит одну переменную. Создадим необходимое количество ячеек.

![DataStream_Tables_Add Cell](..\images\DataStream\image_005.jpg "Add Cell")

5. Были созданы ячейки с названием по умолчанию "**NewCell**", для удобства использования переименуем ячейки под конкретные параметры. Для этого в третьем регионе в разделе `Common: Name` удалим старое название и напишем новое. После нажмём на `Update Cell`, чтобы сохранить изменения.

![DataStream_Tables_Common: Name](..\images\DataStream\image_006.jpg "Common: Name")

6. В `After Effects` перейдём в `Export Carrot Template`. 

![DataStream_AE_Export Carrot Template](..\images\DataStream\image_007.jpg "Export Carrot Template")

7. Переносим нужные параметры в раздел переменные `Variables`. Даём название переменным. Сохраняем шаблон через кнопку `Save Template`.

![DataStream_AE_Variables](..\images\DataStream\image_008.gif "Variables")

8. Открываем `WebPlaylist`. Во вкладке `Editor`, выбираем необходимый параметр в шаблоне. Раскрываем меню, нажимаем `Browse`. Выбираем раздел `DataStream`. Перед нами раскрыт список с созданными ранее таблицами, выбираем необходимую. Далее выбираем созданную ранее ячейку. Данная переменная подключена к ячейке `DataStream`, теперь все значения автоматически переносятся из неё в `Playlist`.

![DataStream_WebPlaylist_WebPlaylist](..\images\DataStream\image_009.gif "WebPlaylist")

9. В `DataStream` в третьем регионе мы видим используемые шаблоны и переменные, которые к ним подключены. Поменяем значение в параметре `Cell: Value`. Нажимаем `Update Cell`. **Готово** значение добавленно в переменную в `Playlist`.

![DataStream_Tables_Value](..\images\DataStream\image_010.gif "Value")
![DataStream_Carrot_Result](..\images\DataStream\image_017.jpg "Result_Local")

10. Удалить ссылку на переменную можно несколькими способами:
    
    **Способ №1.** Открываем `Playlist`. Далее `Editor`. Выбираем нужный шаблон и переменную. В раскрывшемся меню нажимаем `Browse` - `DataStream` - Таблица (*с ячейкой*) - Ячейка (*подсвечена красным*) - `Unlink`.

    **Способ №2.** Открываем `DataStream`. Далее в третьем регионе выбираем нужный шаблон и переменную. Нажимаем `Remove Link` в правом верхнем углу.

    **Способ №3.** Выбираем ячейку и нажимаем `Unlink Cells`. Данный способ удаляем все связи в выбранной ячейке.




#### Второй тип "XML"

1. Аналогично первому типу, проделываем все шаги с [1 по 5](datastream.md#первый-тип-локальный). **Важно! При работе с XML плагином имена созданных ячеек не должны содержать пробелы.**

2. Перейдём в раздел `Plugins`. Добавим плагин через кнопку `Add Plugin`. В открывшемся окне нажимаем на `Set` и указываем путь к файлу. Плагин `XMLParser.dll` лежит в папке `Carrot` - `Bin`.

![DataStream_Plugins_Add Plugin](..\images\DataStream\image_011.gif "Add Plugin")

3. Добавим правило для данного плагина через кнопку `Add Rule`. Это необходимо, чтобы ячейки принимали значения с XML-файла. Данное правило будет работать только после перезапуска приложения `DataStream`. **ПРИМЕЧАНИЕ**: *Если после добавления правила в третьем регионе в разделе `PluginSettings` у вас не появились параметры - удалите плагин, перезапустите `DataStream` и снова добавьте его*.

![DataStream_Plugins_Add Rule](..\images\DataStream\image_012.jpg "Add Rule")

4. Создадим текстовый документ. Внесём в него переменные через "<>". Вводим значения или текст. Сохраняем заменив `.txt` на `.xml`.

![DataStream_Plugins_XML File](..\images\DataStream\image_013.jpg "XML Flie")

5. Чтобы активировать правило, необходимо:
- в `PluginSettings` в `Path` указать путь к XML-файлу;
- в `Update Interval` частоту проверки файла;
- выставить `Rule: Enabled` - `True`. 

![DataStream_Plugins_Activate Rule](..\images\DataStream\image_014.jpg "Activate Rule")

6. Привяжем XML-файл к созданным ранее ячейкам. Для этого нажимаем `Edit Cells`. Выбираем таблицу. Переносим ячейки через `Add Chosen Table Cells`. Нажимаем `Apply`. Не забудем сохранить изменения через `Update Rule`.

![DataStream_Plugins_Edit Cells](..\images\DataStream\image_015.gif "Edit Cells")

7. Перейдём в `Tables`. Наши ячейки автоматически поменяли значения подставив их из XML-файла.

![DataStream_Plugins_Cells XML](..\images\DataStream\image_016.jpg "Cells XML")

8. Проделаем действия из "Первого типа" [пункт 8](datastream.md#первый-тип-локальный).

![DataStream_Carrot_Result_XML](..\images\DataStream\image_018.gif "Result_XML")




#### Третий тип "XLSX"

1. В отличии от 1-го и 2-го типа, работу с 3-м нужно начинать с настройки плагина. Аналогично XML-плагину добавим XLSX через `Add Plugin`. Путь к файлу в папке `Carrot` - `Bin` - `XLSXParserV2.dll`.

2. Подготовим таблицу для DataStream. 

![DataStream_XLSX_XLSX](..\images\DataStream\image_019.jpg "XLSX")

3. В `DataStream` добавим правило через `Add Rule` и перезапустим приложение.

4. Активируем плагин через `Rule: Enabled` - `True`. В `PluginSettings` в графе `Path` введём путь к XLSX таблице. В `Selector` указываем диапазон ячеек XLSX файла, которые будут использованы. В `Sheet Name` пропишем название листа с данными. 

![DataStream_Plugin_XLSX Activate](..\images\DataStream\image_020.jpg "XLSX Activate")

5. Аналогично первому типу, проделываем все шаги с [1 по 5](datastream.md#первый-тип-локальный). **Важно! При работе с XLSX плагином имена созданных ячеек должны соответствовать ячейке XLSX таблицы, например: B1, C6, AZ12.**

6. Перезапустим `DataStream`, ячейки автоматически подцепили значения из таблицы. Если мы будем хотим добавить новую ячейку в `Tables` и XLSX файле, то после каждого подцепа нужно перезапускать `DataStream`.

7. Ручное добавление ячеек может быть неудобным, если необходимо вставить большой массив данных. В данном случае можно использовать функцию `Generate cells`. 

![DataStream_Carrot_Result_XLSX](..\images\DataStream\image_021.gif "Result_XLSX")




### Полезная информация

#### DataStream - автоматизация проигрывания

`DataStream` имеет полезную функцию для автоматического проигрывания анимации с последующей заменой данных в переменной. Для его активации необходимо выполнить несколько простых действий при экспорте шаблона в `Carrot Template Preview`.

1. Перенесём переменные в раздел `Variables`.

2. В каждой перенесённой переменной выставим в графе `DataStream` - `Update Type` - `Call Back`.

3. `Update State` - выставим вариант проигрывания анимации после смены данных.

4. Экспортируем шаблон.

![DataStream_Call Back](..\images\DataStream\image_022.gif "Call Back")






































